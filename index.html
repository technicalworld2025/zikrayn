<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zikrayn - ইসলামিক গাইড</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #0a5c0a;
            --secondary: #0d8b0d;
            --accent: #d4af37;
            --dark: #121212;
            --darker: #0a0a0a;
            --light: #f5f5f5;
            --card-bg: #1e1e1e;
        }

        body {
            background: linear-gradient(135deg, var(--darker), var(--dark));
            color: var(--light);
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(10, 92, 10, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(13, 139, 13, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(212, 175, 55, 0.05) 0%, transparent 50%);
            z-index: -1;
        }

        .islamic-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle, var(--primary) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.03;
            z-index: -1;
        }

        /* Compact Location Selector */
        .location-selector {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 12px;
            margin: 10px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .location-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .form-row {
            display: flex;
            gap: 8px;
        }

        .location-select {
            flex: 1;
            padding: 10px 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: var(--light);
            font-size: 0.9rem;
            outline: none;
        }

        .location-select:focus {
            outline: 1px solid var(--accent);
        }

        .location-btn {
            background: var(--accent);
            color: var(--dark);
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .location-btn:hover {
            background: #e6c44d;
            transform: translateY(-2px);
        }

        .current-location {
            margin-top: 8px;
            text-align: center;
            font-size: 0.8rem;
            color: var(--accent);
        }

        /* Search Result Message */
        .search-result-message {
            text-align: center;
            padding: 15px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            color: var(--accent);
            font-style: italic;
            display: none;
        }

        .search-result-message.show {
            display: block;
        }

        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--darker), var(--dark));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .logo-container {
            text-align: center;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .islamic-logo {
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, var(--light), var(--accent));
            border-radius: 50%;
            margin: 0 auto 20px;
            position: relative;
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            border: 3px solid var(--accent);
        }

        .islamic-logo i {
            font-size: 70px;
            color: var(--primary);
        }

        .app-name {
            font-size: 3.5rem;
            font-weight: bold;
            color: var(--accent);
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
            margin-bottom: 10px;
            font-family: 'Times New Roman', serif;
        }

        .powered-by {
            font-size: 1rem;
            color: #aaa;
            letter-spacing: 1px;
        }

        .loading-animation {
            margin-top: 40px;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255,255,255,0.1);
            border-top: 5px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Main App */
        .app-container {
            display: none;
            max-width: 100%;
            margin: 0 auto;
            padding: 0 10px 80px;
        }

        /* Desktop Layout */
        @media (min-width: 768px) {
            .app-container {
                max-width: 1200px;
                padding: 0 20px 80px;
            }
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page.active {
            display: block;
        }

        /* Header */
        .islamic-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 15px;
            background: rgba(30, 30, 30, 0.8);
            border-radius: 20px;
            margin: 15px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* Desktop Header */
        @media (min-width: 768px) {
            .islamic-header {
                padding: 25px 30px;
                margin: 20px 0;
            }
        }

        .app-title h1 {
            font-size: 1.8rem;
            color: var(--accent);
            font-family: 'Times New Roman', serif;
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }

        /* Desktop App Title */
        @media (min-width: 768px) {
            .app-title h1 {
                font-size: 2.2rem;
            }
        }

        .search-container {
            display: flex;
            width: 60%;
        }

        /* Desktop Search */
        @media (min-width: 768px) {
            .search-container {
                width: 50%;
            }
        }

        .search-bar {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 25px 0 0 25px;
            background: rgba(255,255,255,0.1);
            outline: none;
            color: var(--light);
            font-size: 0.9rem;
        }

        /* Desktop Search Bar */
        @media (min-width: 768px) {
            .search-bar {
                padding: 15px 20px;
                font-size: 1rem;
            }
        }

        .search-bar::placeholder {
            color: #aaa;
        }

        .search-btn {
            padding: 12px 15px;
            border: none;
            border-radius: 0 25px 25px 0;
            background: var(--accent);
            color: var(--dark);
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        /* Desktop Search Button */
        @media (min-width: 768px) {
            .search-btn {
                padding: 15px 20px;
                font-size: 1.1rem;
            }
        }

        .search-btn:hover {
            background: #e6c44d;
        }

        /* Slideshow */
        .slideshow-container {
            height: 200px;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 20px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* Desktop Slideshow */
        @media (min-width: 768px) {
            .slideshow-container {
                height: 300px;
                margin-bottom: 30px;
            }
        }

        .slideshow {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        /* Time Display */
        .time-display {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* Desktop Time Display */
        @media (min-width: 768px) {
            .time-display {
                padding: 25px;
                margin-bottom: 25px;
            }
        }

        .date-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .date-item {
            flex: 1;
            padding: 10px;
        }

        .date-label {
            font-size: 0.8rem;
            color: var(--accent);
            margin-bottom: 5px;
        }

        /* Desktop Date Label */
        @media (min-width: 768px) {
            .date-label {
                font-size: 0.9rem;
            }
        }

        .date-value {
            font-size: 1.1rem;
            font-weight: bold;
        }

        /* Desktop Date Value */
        @media (min-width: 768px) {
            .date-value {
                font-size: 1.3rem;
            }
        }

        /* Prayer Times */
        .prayer-times {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* Desktop Prayer Times */
        @media (min-width: 768px) {
            .prayer-times {
                padding: 25px;
                margin-bottom: 25px;
            }
        }

        .section-title {
            margin-bottom: 20px;
            text-align: center;
            color: var(--accent);
            font-size: 1.3rem;
            position: relative;
            padding-bottom: 10px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 2px;
            background: var(--accent);
        }

        /* Desktop Section Title */
        @media (min-width: 768px) {
            .section-title {
                font-size: 1.6rem;
                margin-bottom: 25px;
            }
            
            .section-title::after {
                width: 100px;
            }
        }

        .prayer-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        /* Desktop Prayer Grid */
        @media (min-width: 768px) {
            .prayer-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 20px;
            }
        }

        .prayer-item {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            transition: all 0.3s;
        }

        /* Desktop Prayer Item */
        @media (min-width: 768px) {
            .prayer-item {
                flex-direction: column;
                text-align: center;
                padding: 20px 15px;
            }
        }

        .prayer-item:hover {
            background: rgba(255,255,255,0.08);
            transform: translateY(-2px);
        }

        .prayer-name {
            color: var(--accent);
            font-weight: bold;
        }

        /* Desktop Prayer Name */
        @media (min-width: 768px) {
            .prayer-name {
                margin-bottom: 10px;
                font-size: 1.1rem;
            }
        }

        .prayer-time {
            font-weight: bold;
        }

        /* Hadith Section */
        .hadith-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* Desktop Hadith Section */
        @media (min-width: 768px) {
            .hadith-section {
                padding: 25px;
                margin-bottom: 25px;
            }
        }

        .hadith-text {
            font-style: italic;
            text-align: center;
            line-height: 1.6;
            font-size: 1.1rem;
            padding: 10px;
        }

        /* Desktop Hadith Text */
        @media (min-width: 768px) {
            .hadith-text {
                font-size: 1.2rem;
                line-height: 1.8;
                padding: 15px 20px;
            }
        }

        /* Footer Navigation */
        .main-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(30, 30, 30, 0.9);
            padding: 15px;
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255,255,255,0.1);
            z-index: 100;
        }

        /* Desktop Footer */
        @media (min-width: 768px) {
            .main-footer {
                padding: 20px;
                left: 50%;
                transform: translateX(-50%);
                width: auto;
                max-width: 500px;
                border-radius: 25px 25px 0 0;
                border-top: none;
                box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
            }
        }

        .nav-icons {
            display: flex;
            justify-content: space-around;
            max-width: 500px;
            margin: 0 auto;
        }

        .nav-btn {
            background: none;
            border: none;
            color: #aaa;
            font-size: 1.3rem;
            padding: 8px 15px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Desktop Nav Button */
        @media (min-width: 768px) {
            .nav-btn {
                padding: 10px 20px;
                font-size: 1.4rem;
                border-radius: 20px;
            }
        }

        .nav-btn span {
            font-size: 0.7rem;
            margin-top: 5px;
        }

        /* Desktop Nav Button Text */
        @media (min-width: 768px) {
            .nav-btn span {
                font-size: 0.8rem;
                margin-top: 8px;
            }
        }

        .nav-btn.active {
            background: var(--accent);
            color: var(--dark);
            box-shadow: 0 3px 10px rgba(212, 175, 55, 0.3);
        }

        /* Video Grid */
        .video-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        /* Desktop Video Grid */
        @media (min-width: 768px) {
            .video-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 25px;
                margin-top: 30px;
            }
        }

        /* Tablet Video Grid */
        @media (min-width: 480px) and (max-width: 767px) {
            .video-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
        }

        .video-item {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .video-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .video-thumbnail {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }

        /* Desktop Video Thumbnail */
        @media (min-width: 768px) {
            .video-thumbnail {
                height: 160px;
            }
        }

        .video-title {
            padding: 15px;
            font-size: 0.9rem;
            text-align: center;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Desktop Video Title */
        @media (min-width: 768px) {
            .video-title {
                padding: 20px;
                font-size: 1rem;
                height: 70px;
            }
        }

        /* Video Popup */
        .video-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .video-popup.active {
            display: flex;
        }

        .popup-content {
            width: 100%;
            max-width: 900px;
            position: relative;
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent);
            border: none;
            color: var(--dark);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
            z-index: 1001;
        }

        .close-btn:hover {
            transform: scale(1.1);
            background: #e6c44d;
        }

        #videoPlayer {
            width: 100%;
            height: 0;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            position: relative;
        }

        #videoPlayer iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Profile Page */
        .profile-container {
            text-align: center;
        }

        /* Desktop Profile Container */
        @media (min-width: 768px) {
            .profile-container {
                max-width: 600px;
                margin: 0 auto;
            }
        }

        .profile-pic {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent);
            margin: 0 auto 20px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        /* Desktop Profile Picture */
        @media (min-width: 768px) {
            .profile-pic {
                width: 180px;
                height: 180px;
                margin-bottom: 30px;
            }
        }

        .profile-pic:hover {
            transform: scale(1.05);
        }

        .profile-form {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* Desktop Profile Form */
        @media (min-width: 768px) {
            .profile-form {
                padding: 30px;
                margin: 25px 0;
            }
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--accent);
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            color: var(--light);
            font-size: 1rem;
        }

        /* Desktop Form Inputs */
        @media (min-width: 768px) {
            .form-group input {
                padding: 15px 20px;
                font-size: 1.1rem;
            }
        }

        .form-group input:focus {
            outline: 1px solid var(--accent);
        }

        .save-btn {
            background: var(--accent);
            color: var(--dark);
            border: none;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        /* Desktop Save Button */
        @media (min-width: 768px) {
            .save-btn {
                padding: 18px;
                font-size: 1.2rem;
            }
        }

        .save-btn:hover {
            background: #e6c44d;
            transform: translateY(-2px);
        }

        .social-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* Desktop Social Section */
        @media (min-width: 768px) {
            .social-section {
                padding: 30px;
                margin: 25px 0;
            }
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* Desktop Social Links */
        @media (min-width: 768px) {
            .social-links {
                gap: 20px;
                margin-top: 25px;
            }
        }

        .social-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--dark);
            text-decoration: none;
            font-size: 1.5rem;
            transition: all 0.3s;
        }

        /* Desktop Social Icons */
        @media (min-width: 768px) {
            .social-icon {
                width: 60px;
                height: 60px;
                font-size: 1.7rem;
            }
        }

        .social-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }

        /* Responsive Grid for Home Page - Desktop */
        @media (min-width: 1024px) {
            #homePage {
                display: grid;
                grid-template-columns: 1fr 1fr;
                grid-template-rows: auto auto auto;
                gap: 25px;
                grid-template-areas: 
                    "header header"
                    "slideshow slideshow"
                    "time prayer"
                    "hadith hadith";
            }
            
            #homePage .islamic-header {
                grid-area: header;
            }
            
            #homePage .slideshow-container {
                grid-area: slideshow;
            }
            
            #homePage .time-display {
                grid-area: time;
                margin-bottom: 0;
            }
            
            #homePage .prayer-times {
                grid-area: prayer;
                margin-bottom: 0;
            }
            
            #homePage .hadith-section {
                grid-area: hadith;
            }
        }

        /* Quran Page Styles */
        .quran-container {
            text-align: center;
        }

        .surah-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        /* Desktop Surah Grid */
        @media (min-width: 768px) {
            .surah-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 20px;
                margin-top: 30px;
            }
        }

        .surah-item {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .surah-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            background: rgba(255,255,255,0.08);
        }

        .surah-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent);
            color: var(--dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .surah-arabic {
            font-size: 1.8rem;
            color: var(--accent);
            margin-bottom: 8px;
            font-family: 'Traditional Arabic', 'Times New Roman', serif;
        }

        .surah-name {
            font-size: 0.9rem;
            color: var(--light);
            font-weight: bold;
        }

        /* Surah Detail Page */
        .surah-detail-container {
            max-width: 100%;
            margin: 0 auto;
        }

        .surah-header {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .surah-title {
            font-size: 2rem;
            color: var(--accent);
            margin-bottom: 10px;
            font-family: 'Traditional Arabic', 'Times New Roman', serif;
        }

        .surah-info {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }

        .surah-info-item {
            background: rgba(255,255,255,0.05);
            padding: 10px 15px;
            border-radius: 10px;
        }

        .ayat-container {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .ayat-item {
            padding: 20px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .ayat-item:last-child {
            border-bottom: none;
        }

        .ayat-number {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--accent);
            color: var(--dark);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
            font-size: 0.9rem;
        }

        .ayat-arabic {
            font-size: 1.8rem;
            line-height: 1.8;
            text-align: right;
            margin-bottom: 15px;
            font-family: 'Traditional Arabic', 'Times New Roman', serif;
        }

        .ayat-translation {
            font-size: 1rem;
            line-height: 1.6;
            color: #ddd;
            margin-top: 10px;
        }

        .ayat-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .ayat-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: var(--light);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .ayat-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .back-btn {
            background: var(--accent);
            color: var(--dark);
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: #e6c44d;
            transform: translateY(-2px);
        }

        /* Mobile Responsive */
        @media (max-width: 480px) {
            .app-container {
                padding: 0 5px 80px;
            }
            
            .date-row {
                flex-direction: column;
            }
            
            .date-item {
                margin-bottom: 10px;
            }
            
            .video-grid {
                grid-template-columns: 1fr;
            }
            
            .prayer-grid {
                grid-template-columns: 1fr;
            }
            
            .surah-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .islamic-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .search-container {
                width: 100%;
            }
            
            .nav-btn {
                padding: 6px 12px;
                font-size: 1.2rem;
            }
            
            .nav-btn span {
                font-size: 0.6rem;
            }
        }

        /* Profile Picture Gallery Modal */
        .profile-pic-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .profile-pic-modal.active {
            display: flex;
        }

        .profile-pic-content {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .profile-pic-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .profile-pic-option {
            background: rgba(255,255,255,0.05);
            border: none;
            color: var(--light);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .profile-pic-option:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        .profile-pic-option i {
            font-size: 1.2rem;
            color: var(--accent);
        }

        #profilePicInput {
            display: none;
        }
    </style>
</head>
<body>
    <div class="background-animation"></div>
    <div class="islamic-pattern"></div>

    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="logo-container">
            <div class="islamic-logo">
                <i class="fas fa-mosque"></i>
            </div>
            <h1 class="app-name">Zikrayn</h1>
            <p class="powered-by">Powered by MVBD Studio</p>
        </div>
        <div class="loading-animation">
            <div class="spinner"></div>
        </div>
    </div>

    <!-- Main App Container -->
    <div class="app-container" id="appContainer">
        <!-- Home Page -->
        <div class="page active" id="homePage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="Search..." class="search-bar" id="homeSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </header>

            <div class="slideshow-container">
                <div class="slideshow">
                    <img src="https://i.postimg.cc/fy01b6Nx/A-crystal-ball-with-Arabic-calligraphy-resting-on-a-beach-at-sunset-reflecting-on-the-water-with-a-b.jpg" class="slide active">
                    <img src="https://i.postimg.cc/HsrNZzms/Grid-Art-20251113-102115295.jpg" class="slide">
                    <img src="https://i.postimg.cc/Kz7MyYKy/images-9.jpg" class="slide">
                    <img src="https://i.postimg.cc/xT1bWn9X/desktop-wallpaper-islamic-islam-jumma-black-allah.jpg" class="slide">
                    <img src="https://i.postimg.cc/hj0f53wK/pngtree-quran-ramadan-islam-book-generative-ai-image-15595994.png" class="slide">
                    <img src="https://i.postimg.cc/rwtzkpbf/pngtree-islamic-illustration-of-a-mosque-with-crescents-and-stars-in-the-picture-image-2105297.png" class="slide">
                    <img src="https://i.postimg.cc/zXyGCBJX/photo-1609599006353-e629aaabfeae.jpg" class="slide">
                    <img src="https://i.postimg.cc/j2mKgHsn/islamic-new-year-quran-book-with-dates-photo.jpg" class="slide">
                    <img src="https://i.postimg.cc/Y9yw06LJ/images-5.jpg" class="slide">
                    <img src="https://i.postimg.cc/zGSZKZRv/golden-mosque-with-arabic-calligraphy-stars-1112179-2763.jpg" class="slide">
                </div>
            </div>

            <div class="time-display">
                <div class="date-row">
                    <div class="date-item">
                        <div class="date-label">বাংলা তারিখ</div>
                        <div class="date-value" id="banglaDate">২৯ কার্তিক, ১৪৩২</div>
                    </div>
                    <div class="date-item">
                        <div class="date-label">English Date</div>
                        <div class="date-value" id="englishDate">Loading...</div>
                    </div>
                </div>
                <div class="date-row">
                    <div class="date-item">
                        <div class="date-label">হিজরি তারিখ</div>
                        <div class="date-value" id="arabicDate">২৩ জুমাদাল উলা, ১৪৪৭</div>
                    </div>
                    <div class="date-item">
                        <div class="date-label">সময়</div>
                        <div class="date-value" id="currentTime">--:--:--</div>
                    </div>
                </div>
            </div>

            <!-- Compact Location Selector -->
            <div class="location-selector" id="locationSelector">
                <h3 class="section-title">আপনার লোকেশন সিলেক্ট করুন</h3>
                <div class="location-form">
                    <div class="form-row">
                        <select class="location-select" id="countrySelect">
                            <option value="">দেশ নির্বাচন করুন</option>
                            <option value="bangladesh">বাংলাদেশ</option>
                            <option value="india">ভারত</option>
                            <option value="pakistan">পাকিস্তান</option>
                            <option value="saudi">সৌদি আরব</option>
                            <option value="uae">সংযুক্ত আরব আমিরাত</option>
                        </select>
                        <select class="location-select" id="districtSelect" disabled>
                            <option value="">জেলা নির্বাচন করুন</option>
                        </select>
                    </div>
                    <button class="location-btn" id="saveLocation">লোকেশন সেভ করুন</button>
                </div>
                <div class="current-location" id="currentLocation">
                    লোকেশন সিলেক্ট করা হয়নি
                </div>
            </div>

            <div class="prayer-times">
                <h3 class="section-title">আজকের নামাজের সময়</h3>
                <div class="prayer-grid">
                    <div class="prayer-item">
                        <span class="prayer-name">ফজর</span>
                        <span class="prayer-time" id="fajrTime">--:--</span>
                    </div>
                    <div class="prayer-item">
                        <span class="prayer-name">জোহর</span>
                        <span class="prayer-time" id="dhuhrTime">--:--</span>
                    </div>
                    <div class="prayer-item">
                        <span class="prayer-name">আসর</span>
                        <span class="prayer-time" id="asrTime">--:--</span>
                    </div>
                    <div class="prayer-item">
                        <span class="prayer-name">মাগরিব</span>
                        <span class="prayer-time" id="maghribTime">--:--</span>
                    </div>
                    <div class="prayer-item">
                        <span class="prayer-name">ইশা</span>
                        <span class="prayer-time" id="ishaTime">--:--</span>
                    </div>
                </div>
            </div>

            <div class="hadith-section">
                <h3 class="section-title">হাদিস শরীফ</h3>
                <p class="hadith-text" id="randomHadith">লোড হচ্ছে...</p>
            </div>
        </div>

        <!-- Quran Page -->
        <div class="page" id="quranPage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="সূরা খুঁজুন..." class="search-bar" id="quranSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </header>

            <!-- Search Result Message -->
            <div class="search-result-message" id="quranSearchResult"></div>

            <div class="quran-container">
                <h3 class="section-title">পবিত্র কুরআন</h3>
                <div class="surah-grid" id="surahGrid">
                    <!-- Surah items will be populated dynamically -->
                </div>
            </div>
        </div>

        <!-- Surah Detail Page -->
        <div class="page" id="surahDetailPage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
            </header>

            <div class="surah-detail-container">
                <button class="back-btn" id="backToQuran">
                    <i class="fas fa-arrow-left"></i>
                    কুরআনে ফিরে যান
                </button>

                <div class="surah-header" id="surahHeader">
                    <h2 class="surah-title" id="surahTitle">সূরা আল-ফাতিহা</h2>
                    <div class="surah-info">
                        <div class="surah-info-item">
                            <div>আয়াত সংখ্যা</div>
                            <div id="surahAyatCount">7</div>
                        </div>
                        <div class="surah-info-item">
                            <div>পৃষ্ঠা</div>
                            <div id="surahPage">1</div>
                        </div>
                    </div>
                </div>

                <div class="ayat-container" id="ayatContainer">
                    <!-- Ayat items will be populated dynamically -->
                </div>
            </div>
        </div>

        <!-- Waz Page -->
        <div class="page" id="wazPage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="ওয়াজ খুঁজুন..." class="search-bar" id="wazSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </header>

            <!-- Search Result Message -->
            <div class="search-result-message" id="wazSearchResult"></div>

            <div class="recent-waz">
                <h3 class="section-title">সাম্প্রতিক ওয়াজ</h3>
                <div class="video-grid" id="wazGrid">
                    <!-- Waz items will be populated from Firebase -->
                </div>
            </div>
        </div>

        <!-- Gojol Page -->
        <div class="page" id="gojolPage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="গজল খুঁজুন..." class="search-bar" id="gojolSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </header>

            <!-- Search Result Message -->
            <div class="search-result-message" id="gojolSearchResult"></div>

            <div class="recent-gojol">
                <h3 class="section-title">গজল সমগ্র</h3>
                <div class="video-grid" id="gojolGrid">
                    <!-- Gojol items will be populated from Firebase -->
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div class="page" id="profilePage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
            </header>

            <div class="profile-container">
                <img src="https://via.placeholder.com/150/1a5e1a/ffffff?text=User" class="profile-pic" id="profilePic">
                
                <div class="profile-form">
                    <div class="form-group">
                        <label for="userName">নাম</label>
                        <input type="text" id="userName" placeholder="আপনার নাম লিখুন">
                    </div>
                    <div class="form-group">
                        <label for="userAge">বয়স</label>
                        <input type="number" id="userAge" placeholder="আপনার বয়স লিখুন">
                    </div>
                    <div class="form-group">
                        <label for="userMobile">মোবাইল নম্বর</label>
                        <input type="tel" id="userMobile" placeholder="আপনার মোবাইল নম্বর লিখুন">
                    </div>
                    <div class="form-group">
                        <label for="userEmail">ইমেইল</label>
                        <input type="email" id="userEmail" placeholder="আপনার ইমেইল লিখুন">
                    </div>
                    <button class="save-btn" id="saveProfile">সেভ করুন</button>
                </div>

                <div class="social-section">
                    <h3 class="section-title">যোগাযোগ করুন</h3>
                    <div class="social-links">
                        <a href="#" class="social-icon"><i class="fab fa-whatsapp"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-facebook-messenger"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-tiktok"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-telegram"></i></a>
                        <a href="#" class="social-icon"><i class="fas fa-globe"></i></a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Video Popup -->
        <div class="video-popup" id="videoPopup">
            <div class="popup-content">
                <button class="close-btn" id="closeVideo"><i class="fas fa-times"></i></button>
                <div id="videoPlayer"></div>
            </div>
        </div>

        <!-- Profile Picture Gallery Modal -->
        <div class="profile-pic-modal" id="profilePicModal">
            <div class="profile-pic-content">
                <h3 class="section-title">প্রোফাইল ছবি পরিবর্তন করুন</h3>
                <div class="profile-pic-options">
                    <button class="profile-pic-option" id="galleryOption">
                        <i class="fas fa-images"></i>
                        গ্যালারি থেকে ছবি নির্বাচন করুন
                    </button>
                    <button class="profile-pic-option" id="cameraOption">
                        <i class="fas fa-camera"></i>
                        ক্যামেরা দিয়ে ছবি তুলুন
                    </button>
                    <button class="profile-pic-option" id="defaultOption">
                        <i class="fas fa-user-circle"></i>
                        ডিফল্ট ছবি ব্যবহার করুন
                    </button>
                </div>
                <button class="save-btn" id="closeProfilePicModal" style="margin-top: 20px;">বন্ধ করুন</button>
                <input type="file" id="profilePicInput" accept="image/*">
            </div>
        </div>

        <!-- Footer Navigation -->
        <footer class="main-footer">
            <div class="nav-icons">
                <button class="nav-btn active" data-page="home">
                    <i class="fas fa-home"></i>
                    <span>হোম</span>
                </button>
                <button class="nav-btn" data-page="quran">
                    <i class="fas fa-book-quran"></i>
                    <span>কুরআন</span>
                </button>
                <button class="nav-btn" data-page="waz">
                    <i class="fas fa-book-open"></i>
                    <span>ওয়াজ</span>
                </button>
                <button class="nav-btn" data-page="gojol">
                    <i class="fas fa-music"></i>
                    <span>গজল</span>
                </button>
                <button class="nav-btn" data-page="profile">
                    <i class="fas fa-user"></i>
                    <span>প্রোফাইল</span>
                </button>
            </div>
        </footer>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCjrUpoUEtouapeVMSZL0IwtteW8JObqN8",
            authDomain: "zikrayn-app.firebaseapp.com",
            projectId: "zikrayn-app",
            storageBucket: "zikrayn-app.firebasestorage.app",
            messagingSenderId: "397688673617",
            appId: "1:397688673617:web:a03869eb25585b5aa3ef70",
            measurementId: "G-BS71JD2G05"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Firebase Collections
        const wazCollection = db.collection('waz');
        const gojolCollection = db.collection('gojol');
        const hadithCollection = db.collection('hadiths');
        const searchLogCollection = db.collection('searchLogs');

        // Sample data for initial setup
        const sampleHadiths = [
            "যে ব্যক্তি আল্লাহ ও আখিরাতের দিনের উপর ঈমান রাখে, সে যেন তার প্রতিবেশীকে কষ্ট না দেয়।",
            "তোমাদের মধ্যে সেই ব্যক্তি সর্বোত্তম, যে কুরআন শিক্ষা করে এবং অন্যকে শিক্ষা দেয়।",
            "সদকাহ দারিদ্র্য দূর করে, আয়ু বাড়ায় এবং অসুস্থতা থেকে রক্ষা করে।",
            "যে ব্যক্তি তার ভাইয়ের প্রয়োজনে সাহায্য করে, আল্লাহও তার প্রয়োজনে সাহায্য করেন।",
            "আল্লাহ তায়ালা বলেন, 'হে আদম সন্তান, তুমি আমার ইবাদত কর, আমি তোমার অন্তরকে ধন-সম্পদে পূর্ণ করে দিব।'"
        ];

        // Sample Waz and Gojol data
        const sampleWaz = [
            { title: "রমজানের ফজিলত", videoUrl: "https://www.youtube.com/watch?v=abc123", keywords: ["রমজান", "ফজিলত", "রোজা"] },
            { title: "সালাতের গুরুত্ব", videoUrl: "https://www.youtube.com/watch?v=def456", keywords: ["সালাত", "নামাজ", "গুরুত্ব"] },
            { title: "কুরআন তিলাওয়াত", videoUrl: "https://www.youtube.com/watch?v=ghi789", keywords: ["কুরআন", "তিলাওয়াত", "পাঠ"] },
            { title: "দান সদকার ফজিলত", videoUrl: "https://www.youtube.com/watch?v=jkl012", keywords: ["দান", "সদকা", "ফজিলত"] },
            { title: "সত্যের পথে চলা", videoUrl: "https://www.youtube.com/watch?v=mno345", keywords: ["সত্য", "পথ", "চলা"] },
            { title: "আখিরাতের প্রস্তুতি", videoUrl: "https://www.youtube.com/watch?v=pqr678", keywords: ["আখিরাত", "প্রস্তুতি", "মৃত্যু"] }
        ];

        const sampleGojol = [
            { title: "আল্লাহর রহমত", videoUrl: "https://www.youtube.com/watch?v=stu901", keywords: ["আল্লাহ", "রহমত", "গজল"] },
            { title: "নবীজির মদীনা", videoUrl: "https://www.youtube.com/watch?v=vwx234", keywords: ["নবী", "মদীনা", "গজল"] },
            { title: "ইসলামের জয়গান", videoUrl: "https://www.youtube.com/watch?v=yza567", keywords: ["ইসলাম", "জয়গান", "গজল"] },
            { title: "মোহাম্মদুর রাসুলুল্লাহ", videoUrl: "https://www.youtube.com/watch?v=bcd890", keywords: ["মোহাম্মদ", "রাসুল", "গজল"] },
            { title: "কাবা শরীফের গজল", videoUrl: "https://www.youtube.com/watch?v=efg123", keywords: ["কাবা", "শরীফ", "গজল"] },
            { title: "রমজানের গজল", videoUrl: "https://www.youtube.com/watch?v=hij456", keywords: ["রমজান", "গজল", "ইবাদত"] }
        ];

        // Quran Data - All 114 Surahs
        const surahData = [
            { number: 1, arabic: "الفاتحة", name: "সূরা আল-ফাতিহা", ayat: 7, page: 1 },
            { number: 2, arabic: "البقرة", name: "সূরা আল-বাকারা", ayat: 286, page: 2 },
            { number: 3, arabic: "آل عمران", name: "সূরা আলে-ইমরান", ayat: 200, page: 50 },
            { number: 4, arabic: "النساء", name: "সূরা আন-নিসা", ayat: 176, page: 77 },
            { number: 5, arabic: "المائدة", name: "সূরা আল-মায়িদাহ", ayat: 120, page: 106 },
            { number: 6, arabic: "الأنعام", name: "সূরা আল-আন'আম", ayat: 165, page: 128 },
            { number: 7, arabic: "الأعراف", name: "সূরা আল-আ'রাফ", ayat: 206, page: 151 },
            { number: 8, arabic: "الأنفال", name: "সূরা আল-আনফাল", ayat: 75, page: 177 },
            { number: 9, arabic: "التوبة", name: "সূরা আত-তাওবাহ", ayat: 129, page: 187 },
            { number: 10, arabic: "يونس", name: "সূরা ইউনুস", ayat: 109, page: 208 },
            // Add more surahs as needed...
        ];

        // Location data
        const locationData = {
            bangladesh: {
                districts: [
                    "ঢাকা", "চট্টগ্রাম", "রাজশাহী", "খুলনা", "বরিশাল", "সিলেট", 
                    "রংপুর", "ময়মনসিংহ", "নোয়াখালী", "নারায়ণগঞ্জ", "গাজীপুর", "ঢাকা বিভাগীয়"
                ]
            },
            india: {
                districts: ["দিল্লি", "কলকাতা", "মুম্বাই", "চেন্নাই", "হায়দ্রাবাদ"]
            },
            pakistan: {
                districts: ["করাচি", "লাহোর", "ইসলামাবাদ", "পেশাওয়ার"]
            },
            saudi: {
                districts: ["রিয়াদ", "জেদ্দা", "মক্কা", "মদিনা"]
            },
            uae: {
                districts: ["দুবাই", "আবুধাবি", "শারজাহ"]
            }
        };

        // API থেকে নামাজের সময় আপডেট করার ফাংশন
        async function updatePrayerTimesFromAPI(country, city) {
            try {
                // API কল করার জন্য দেশ ও শহরের নাম ইংরেজিতে রূপান্তর
                const countryMap = {
                    'bangladesh': 'Bangladesh',
                    'india': 'India',
                    'pakistan': 'Pakistan',
                    'saudi': 'Saudi Arabia',
                    'uae': 'United Arab Emirates'
                };
                
                const cityMap = {
                    'ঢাকা': 'Dhaka',
                    'চট্টগ্রাম': 'Chittagong',
                    'রাজশাহী': 'Rajshahi',
                    'খুলনা': 'Khulna',
                    'বরিশাল': 'Barisal',
                    'সিলেট': 'Sylhet',
                    'রংপুর': 'Rangpur',
                    'ময়মনসিংহ': 'Mymensingh',
                    'নোয়াখালী': 'Noakhali',
                    'নারায়ণগঞ্জ': 'Narayanganj',
                    'গাজীপুর': 'Gazipur',
                    'ঢাকা বিভাগীয়': 'Dhaka',
                    'দিল্লি': 'Delhi',
                    'কলকাতা': 'Kolkata',
                    'মুম্বাই': 'Mumbai',
                    'চেন্নাই': 'Chennai',
                    'হায়দ্রাবাদ': 'Hyderabad',
                    'করাচি': 'Karachi',
                    'লাহোর': 'Lahore',
                    'ইসলামাবাদ': 'Islamabad',
                    'পেশাওয়ার': 'Peshawar',
                    'রিয়াদ': 'Riyadh',
                    'জেদ্দা': 'Jeddah',
                    'মক্কা': 'Makkah',
                    'মদিনা': 'Madinah',
                    'দুবাই': 'Dubai',
                    'আবুধাবি': 'Abu Dhabi',
                    'শারজাহ': 'Sharjah'
                };
                
                const apiCountry = countryMap[country] || country;
                const apiCity = cityMap[city] || city;
                
                // API থেকে নামাজের সময় ডেটা আনুন
                const response = await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${apiCity}&country=${apiCountry}&method=2`);
                const data = await response.json();
                
                if (data.code === 200) {
                    const timings = data.data.timings;
                    
                    // API থেকে প্রাপ্ত সময়গুলোকে 12-ঘন্টা ফরম্যাটে রূপান্তর করুন
                    const formatTime = (time24) => {
                        const [hours, minutes] = time24.split(':');
                        const hour = parseInt(hours);
                        const ampm = hour >= 12 ? 'PM' : 'AM';
                        const hour12 = hour % 12 || 12;
                        return `${hour12}:${minutes} ${ampm}`;
                    };
                    
                    // DOM আপডেট করুন
                    document.getElementById('fajrTime').textContent = formatTime(timings.Fajr);
                    document.getElementById('dhuhrTime').textContent = formatTime(timings.Dhuhr);
                    document.getElementById('asrTime').textContent = formatTime(timings.Asr);
                    document.getElementById('maghribTime').textContent = formatTime(timings.Maghrib);
                    document.getElementById('ishaTime').textContent = formatTime(timings.Isha);
                    
                    // লোকাল স্টোরেজে সেভ করুন
                    const prayerData = {
                        fajr: formatTime(timings.Fajr),
                        dhuhr: formatTime(timings.Dhuhr),
                        asr: formatTime(timings.Asr),
                        maghrib: formatTime(timings.Maghrib),
                        isha: formatTime(timings.Isha),
                        timestamp: new Date().getTime()
                    };
                    
                    localStorage.setItem(`zikraynPrayerTimes_${country}_${city}`, JSON.stringify(prayerData));
                } else {
                    throw new Error('API থেকে ডেটা লোড করতে সমস্যা হয়েছে');
                }
            } catch (error) {
                console.error('Prayer times API error:', error);
                
                // API ব্যর্থ হলে পূর্বের স্ট্যাটিক ডেটা ব্যবহার করুন
                const storageKey = `zikraynPrayerTimes_${country}_${city}`;
                const storedData = localStorage.getItem(storageKey);
                
                if (storedData) {
                    const prayerData = JSON.parse(storedData);
                    document.getElementById('fajrTime').textContent = prayerData.fajr;
                    document.getElementById('dhuhrTime').textContent = prayerData.dhuhr;
                    document.getElementById('asrTime').textContent = prayerData.asr;
                    document.getElementById('maghribTime').textContent = prayerData.maghrib;
                    document.getElementById('ishaTime').textContent = prayerData.isha;
                } else {
                    // ডিফল্ট নামাজের সময়
                    document.getElementById('fajrTime').textContent = "4:58 AM";
                    document.getElementById('dhuhrTime').textContent = "11:44 AM";
                    document.getElementById('asrTime').textContent = "3:37 PM";
                    document.getElementById('maghribTime').textContent = "5:14 PM";
                    document.getElementById('ishaTime').textContent = "6:31 PM";
                }
            }
        }

        // লোকেশন পরিবর্তন হলে নামাজের সময় আপডেট করুন
        function updatePrayerTimesForLocation(country, district) {
            // প্রথমে লোকাল স্টোরেজ চেক করুন (24 ঘন্টার মধ্যে হলে নতুন API কল করবে না)
            const storageKey = `zikraynPrayerTimes_${country}_${district}`;
            const storedData = localStorage.getItem(storageKey);
            
            if (storedData) {
                const prayerData = JSON.parse(storedData);
                const now = new Date().getTime();
                const oneDay = 24 * 60 * 60 * 1000; // 24 ঘন্টা
                
                // যদি 24 ঘন্টার মধ্যে ডেটা সেভ করা থাকে, তাহলে সেটাই ব্যবহার করুন
                if (now - prayerData.timestamp < oneDay) {
                    document.getElementById('fajrTime').textContent = prayerData.fajr;
                    document.getElementById('dhuhrTime').textContent = prayerData.dhuhr;
                    document.getElementById('asrTime').textContent = prayerData.asr;
                    document.getElementById('maghribTime').textContent = prayerData.maghrib;
                    document.getElementById('ishaTime').textContent = prayerData.isha;
                    return;
                }
            }
            
            // নতুন API কল করুন
            updatePrayerTimesFromAPI(country, district);
        }

        // App initialization
        document.addEventListener('DOMContentLoaded', function() {
            // Show splash screen for 3 seconds
            setTimeout(() => {
                document.getElementById('splashScreen').style.display = 'none';
                document.getElementById('appContainer').style.display = 'block';
                initializeApp();
            }, 3000);
        });

        function initializeApp() {
            // Initialize slideshow
            initSlideshow();
            
            // Initialize date and time
            updateDateTime();
            setInterval(updateDateTime, 1000);
            
            // Initialize location system
            setupLocationSystem();
            
            // Initialize prayer times based on saved location
            updatePrayerTimes();
            
            // Initialize random hadith
            loadRandomHadithFromFirebase();
            
            // Load waz and gojol from Firebase
            loadWazFromFirebase();
            loadGojolFromFirebase();
            
            // Load Quran surahs
            loadSurahs();
            
            // Set up real-time listeners
            setupRealTimeWazListener();
            setupRealTimeGojolListener();
            
            // Set up navigation
            setupNavigation();
            
            // Set up profile functionality
            setupProfile();
            
            // Set up search functionality
            setupSearch();
        }

        function initSlideshow() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 4000);
        }

        function updateDateTime() {
            const now = new Date();
            
            // English date
            const englishDate = now.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            document.getElementById('englishDate').textContent = englishDate;
            
            // Current time in 12-hour format
            const currentTime = now.toLocaleTimeString('bn-BD', { 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit',
                hour12: true 
            });
            document.getElementById('currentTime').textContent = currentTime;
        }

        function setupLocationSystem() {
            const countrySelect = document.getElementById('countrySelect');
            const districtSelect = document.getElementById('districtSelect');
            const saveLocationBtn = document.getElementById('saveLocation');
            const currentLocationDisplay = document.getElementById('currentLocation');
            
            // Load saved location if exists
            const savedLocation = localStorage.getItem('zikraynLocation');
            if (savedLocation) {
                const location = JSON.parse(savedLocation);
                countrySelect.value = location.country;
                updateDistrictOptions(location.country);
                districtSelect.value = location.district;
                updateCurrentLocationDisplay(location.country, location.district);
                updatePrayerTimesForLocation(location.country, location.district);
            }
            
            // Country selection change
            countrySelect.addEventListener('change', function() {
                const country = this.value;
                if (country) {
                    districtSelect.disabled = false;
                    updateDistrictOptions(country);
                } else {
                    districtSelect.disabled = true;
                    districtSelect.innerHTML = '<option value="">জেলা নির্বাচন করুন</option>';
                }
            });
            
            // District selection change - auto update prayer times
            districtSelect.addEventListener('change', function() {
                const country = countrySelect.value;
                const district = this.value;
                
                if (country && district) {
                    updatePrayerTimesForLocation(country, district);
                    updateCurrentLocationDisplay(country, district);
                }
            });
            
            // Save location
            saveLocationBtn.addEventListener('click', function() {
                const country = countrySelect.value;
                const district = districtSelect.value;
                
                if (!country || !district) {
                    alert('দয়া করে দেশ এবং জেলা নির্বাচন করুন।');
                    return;
                }
                
                const location = {
                    country: country,
                    district: district
                };
                
                localStorage.setItem('zikraynLocation', JSON.stringify(location));
                updateCurrentLocationDisplay(country, district);
                updatePrayerTimesForLocation(country, district);
                
                alert('লোকেশন সফলভাবে সেভ করা হয়েছে!');
            });
        }

        function updateDistrictOptions(country) {
            const districtSelect = document.getElementById('districtSelect');
            const districts = locationData[country]?.districts || [];
            
            districtSelect.innerHTML = '<option value="">জেলা নির্বাচন করুন</option>';
            
            districts.forEach(district => {
                const option = document.createElement('option');
                option.value = district;
                option.textContent = district;
                districtSelect.appendChild(option);
            });
        }

        function updateCurrentLocationDisplay(country, district) {
            const currentLocationDisplay = document.getElementById('currentLocation');
            const countryNames = {
                bangladesh: "বাংলাদেশ",
                india: "ভারত",
                pakistan: "পাকিস্তান",
                saudi: "সৌদি আরব",
                uae: "সংযুক্ত আরব আমিরাত"
            };
            
            currentLocationDisplay.textContent = `${countryNames[country]}, ${district}`;
        }

        function updatePrayerTimes() {
            const savedLocation = localStorage.getItem('zikraynLocation');
            
            if (savedLocation) {
                const location = JSON.parse(savedLocation);
                updatePrayerTimesForLocation(location.country, location.district);
            } else {
                // Default prayer times for Dhaka, Bangladesh
                updatePrayerTimesForLocation('bangladesh', 'ঢাকা');
            }
        }

        // Quran Functions
        function loadSurahs() {
            const surahGrid = document.getElementById('surahGrid');
            surahGrid.innerHTML = '';
            
            surahData.forEach(surah => {
                const surahItem = document.createElement('div');
                surahItem.className = 'surah-item';
                surahItem.setAttribute('data-surah', surah.number);
                surahItem.setAttribute('data-name', surah.name.toLowerCase());
                
                surahItem.innerHTML = `
                    <div class="surah-number">${surah.number}</div>
                    <div class="surah-arabic">${surah.arabic}</div>
                    <div class="surah-name">${surah.name}</div>
                `;
                
                surahItem.addEventListener('click', () => openSurah(surah));
                surahGrid.appendChild(surahItem);
            });
        }

        function openSurah(surah) {
            // Show surah detail page
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById('surahDetailPage').classList.add('active');
            
            // Update surah header
            document.getElementById('surahTitle').textContent = surah.name;
            document.getElementById('surahAyatCount').textContent = surah.ayat;
            document.getElementById('surahPage').textContent = surah.page;
            
            // Load ayat data
            loadAyat(surah.number);
        }

        async function loadAyat(surahNumber) {
            const ayatContainer = document.getElementById('ayatContainer');
            ayatContainer.innerHTML = '<p style="text-align:center; padding:20px; color: var(--accent);">লোড হচ্ছে...</p>';
            
            try {
                // Use Quran API to fetch ayat
                const response = await fetch(`https://api.alquran.cloud/v1/surah/${surahNumber}/bn.bengali`);
                const data = await response.json();
                
                if (data.code === 200) {
                    const ayat = data.data.ayahs;
                    displayAyat(ayat);
                } else {
                    throw new Error('API থেকে আয়াত লোড করতে সমস্যা হয়েছে');
                }
            } catch (error) {
                console.error('Ayat loading error:', error);
                ayatContainer.innerHTML = '<p style="text-align:center; padding:20px; color: #ff6b6b;">আয়াত লোড করতে সমস্যা হচ্ছে</p>';
            }
        }

        function displayAyat(ayat) {
            const ayatContainer = document.getElementById('ayatContainer');
            ayatContainer.innerHTML = '';
            
            ayat.forEach(ayah => {
                const ayatItem = document.createElement('div');
                ayatItem.className = 'ayat-item';
                
                ayatItem.innerHTML = `
                    <div>
                        <span class="ayat-number">${ayah.numberInSurah}</span>
                    </div>
                    <div class="ayat-arabic">${ayah.text}</div>
                    <div class="ayat-translation">${ayah.translation || ''}</div>
                    <div class="ayat-actions">
                        <button class="ayat-btn">
                            <i class="fas fa-play"></i>
                            শুনুন
                        </button>
                        <button class="ayat-btn">
                            <i class="fas fa-bookmark"></i>
                            সেভ করুন
                        </button>
                        <button class="ayat-btn">
                            <i class="fas fa-share"></i>
                            শেয়ার করুন
                        </button>
                    </div>
                `;
                
                ayatContainer.appendChild(ayatItem);
            });
        }

        // Firebase Functions for User App
        function loadWazFromFirebase() {
            const wazGrid = document.getElementById('wazGrid');
            wazGrid.innerHTML = '<p style="text-align:center; padding:20px; color: var(--accent);">লোড হচ্ছে...</p>';
            
            wazCollection.orderBy('timestamp', 'desc').limit(12).get()
                .then((querySnapshot) => {
                    wazGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        // If no data in Firebase, use sample data
                        sampleWaz.forEach(waz => {
                            createVideoItem(wazGrid, waz, 'waz');
                        });
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const waz = doc.data();
                        createVideoItem(wazGrid, waz, 'waz');
                    });
                })
                .catch((error) => {
                    wazGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #ff6b6b;">লোড করতে সমস্যা হচ্ছে</p>';
                    console.error("Error loading waz: ", error);
                });
        }

        function loadGojolFromFirebase() {
            const gojolGrid = document.getElementById('gojolGrid');
            gojolGrid.innerHTML = '<p style="text-align:center; padding:20px; color: var(--accent);">লোড হচ্ছে...</p>';
            
            gojolCollection.orderBy('timestamp', 'desc').limit(12).get()
                .then((querySnapshot) => {
                    gojolGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        // If no data in Firebase, use sample data
                        sampleGojol.forEach(gojol => {
                            createVideoItem(gojolGrid, gojol, 'gojol');
                        });
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const gojol = doc.data();
                        createVideoItem(gojolGrid, gojol, 'gojol');
                    });
                })
                .catch((error) => {
                    gojolGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #ff6b6b;">লোড করতে সমস্যা হচ্ছে</p>';
                    console.error("Error loading gojol: ", error);
                });
        }

        function createVideoItem(container, item, type) {
            const videoItem = document.createElement('div');
            videoItem.className = 'video-item';
            videoItem.setAttribute('data-title', item.title.toLowerCase());
            videoItem.setAttribute('data-keywords', item.keywords ? item.keywords.join(',') : '');
            
            // Generate thumbnail URL from YouTube video ID
            const videoId = getYouTubeId(item.videoUrl);
            const thumbnailUrl = item.thumbnail || `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
            
            videoItem.innerHTML = `
                <img src="${thumbnailUrl}" class="video-thumbnail" alt="${item.title}" onerror="this.src='https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'">
                <div class="video-title">${item.title}</div>
            `;
            
            videoItem.addEventListener('click', () => playVideo(item.videoUrl, item.title));
            container.appendChild(videoItem);
        }

        function getYouTubeId(url) {
            if (!url) return null;
            
            // Extract YouTube video ID from various URL formats
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length === 11) ? match[7] : null;
        }

        function loadRandomHadithFromFirebase() {
            hadithCollection.get()
                .then((querySnapshot) => {
                    if (!querySnapshot.empty) {
                        const hadiths = [];
                        querySnapshot.forEach((doc) => {
                            hadiths.push(doc.data().text);
                        });
                        
                        // Random hadith select koro
                        const randomIndex = Math.floor(Math.random() * hadiths.length);
                        document.getElementById('randomHadith').textContent = hadiths[randomIndex];
                    } else {
                        // If no hadiths in Firebase, use sample hadiths
                        const randomIndex = Math.floor(Math.random() * sampleHadiths.length);
                        document.getElementById('randomHadith').textContent = sampleHadiths[randomIndex];
                    }
                })
                .catch((error) => {
                    // If error, use sample hadiths
                    const randomIndex = Math.floor(Math.random() * sampleHadiths.length);
                    document.getElementById('randomHadith').textContent = sampleHadiths[randomIndex];
                    console.error("Error loading hadith: ", error);
                });
        }

        // Real-time listeners for instant updates
        function setupRealTimeWazListener() {
            wazCollection.orderBy('timestamp', 'desc').limit(12)
                .onSnapshot((querySnapshot) => {
                    const wazGrid = document.getElementById('wazGrid');
                    wazGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        // If no data in Firebase, use sample data
                        sampleWaz.forEach(waz => {
                            createVideoItem(wazGrid, waz, 'waz');
                        });
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const waz = doc.data();
                        createVideoItem(wazGrid, waz, 'waz');
                    });
                }, (error) => {
                    console.error("Real-time waz listener error: ", error);
                });
        }

        function setupRealTimeGojolListener() {
            gojolCollection.orderBy('timestamp', 'desc').limit(12)
                .onSnapshot((querySnapshot) => {
                    const gojolGrid = document.getElementById('gojolGrid');
                    gojolGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        // If no data in Firebase, use sample data
                        sampleGojol.forEach(gojol => {
                            createVideoItem(gojolGrid, gojol, 'gojol');
                        });
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const gojol = doc.data();
                        createVideoItem(gojolGrid, gojol, 'gojol');
                    });
                }, (error) => {
                    console.error("Real-time gojol listener error: ", error);
                });
        }

        function playVideo(videoUrl, title) {
            const videoPopup = document.getElementById('videoPopup');
            const videoPlayer = document.getElementById('videoPlayer');
            
            const videoId = getYouTubeId(videoUrl);
            if (!videoId) {
                alert('ভিডিও লোড করতে সমস্যা হচ্ছে। দয়া করে ভিডিও লিঙ্ক চেক করুন।');
                return;
            }
            
            videoPlayer.innerHTML = `
                <iframe 
                    src="https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            `;
            
            videoPopup.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function setupNavigation() {
            const navButtons = document.querySelectorAll('.nav-btn');
            const pages = document.querySelectorAll('.page');
            
            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetPage = button.getAttribute('data-page');
                    
                    // Update active button
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Show target page
                    pages.forEach(page => page.classList.remove('active'));
                    document.getElementById(`${targetPage}Page`).classList.add('active');
                    
                    // Scroll to top when changing pages
                    window.scrollTo(0, 0);
                });
            });
            
            // Back to Quran button
            document.getElementById('backToQuran').addEventListener('click', () => {
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                document.getElementById('quranPage').classList.add('active');
                
                // Update navigation button
                navButtons.forEach(btn => btn.classList.remove('active'));
                document.querySelector('[data-page="quran"]').classList.add('active');
            });
            
            // Close video popup
            document.getElementById('closeVideo').addEventListener('click', () => {
                document.getElementById('videoPopup').classList.remove('active');
                document.getElementById('videoPlayer').innerHTML = '';
                document.body.style.overflow = 'auto'; // Restore scrolling
            });
            
            // Close popup when clicking outside
            document.getElementById('videoPopup').addEventListener('click', (e) => {
                if (e.target.id === 'videoPopup') {
                    document.getElementById('videoPopup').classList.remove('active');
                    document.getElementById('videoPlayer').innerHTML = '';
                    document.body.style.overflow = 'auto';
                }
            });
        }

        function setupProfile() {
            // Profile picture change - direct gallery access
            document.getElementById('profilePic').addEventListener('click', function() {
                document.getElementById('profilePicInput').click();
            });
            
            // Profile picture modal options
            document.getElementById('galleryOption').addEventListener('click', function() {
                document.getElementById('profilePicInput').click();
            });
            
            document.getElementById('cameraOption').addEventListener('click', function() {
                alert('ক্যামেরা অপশন শীঘ্রই আসছে!');
            });
            
            document.getElementById('defaultOption').addEventListener('click', function() {
                document.getElementById('profilePic').src = 'https://via.placeholder.com/150/1a5e1a/ffffff?text=User';
                saveProfilePicture('https://via.placeholder.com/150/1a5e1a/ffffff?text=User');
                document.getElementById('profilePicModal').classList.remove('active');
            });
            
            document.getElementById('closeProfilePicModal').addEventListener('click', function() {
                document.getElementById('profilePicModal').classList.remove('active');
            });
            
            // Handle file selection
            document.getElementById('profilePicInput').addEventListener('change', function(e) {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();
                    
                    reader.onload = function(event) {
                        document.getElementById('profilePic').src = event.target.result;
                        saveProfilePicture(event.target.result);
                    }
                    
                    reader.readAsDataURL(e.target.files[0]);
                }
            });
            
            // Load saved profile data if exists
            const savedProfile = localStorage.getItem('zikraynProfile');
            if (savedProfile) {
                const profile = JSON.parse(savedProfile);
                document.getElementById('userName').value = profile.name || '';
                document.getElementById('userAge').value = profile.age || '';
                document.getElementById('userMobile').value = profile.mobile || '';
                document.getElementById('userEmail').value = profile.email || '';
                
                // Load profile picture if saved
                if (profile.profilePic) {
                    document.getElementById('profilePic').src = profile.profilePic;
                }
            }
            
            // Save profile on button click
            document.getElementById('saveProfile').addEventListener('click', function() {
                const profile = {
                    name: document.getElementById('userName').value,
                    age: document.getElementById('userAge').value,
                    mobile: document.getElementById('userMobile').value,
                    email: document.getElementById('userEmail').value,
                    profilePic: document.getElementById('profilePic').src
                };
                
                localStorage.setItem('zikraynProfile', JSON.stringify(profile));
                alert('প্রোফাইল তথ্য সফলভাবে সেভ করা হয়েছে!');
            });
        }

        function saveProfilePicture(imageData) {
            const savedProfile = localStorage.getItem('zikraynProfile');
            let profile = {};
            
            if (savedProfile) {
                profile = JSON.parse(savedProfile);
            }
            
            profile.profilePic = imageData;
            localStorage.setItem('zikraynProfile', JSON.stringify(profile));
        }

        function setupSearch() {
            // Home search
            document.querySelector('#homeSearch + .search-btn').addEventListener('click', function() {
                const query = document.getElementById('homeSearch').value;
                if (query.trim()) {
                    alert(`"${query}" খুঁজছেন...`);
                }
            });
            
            // Quran search
            document.querySelector('#quranSearch + .search-btn').addEventListener('click', function() {
                const query = document.getElementById('quranSearch').value;
                if (query.trim()) {
                    searchQuran(query);
                }
            });
            
            // Waz search
            document.querySelector('#wazSearch + .search-btn').addEventListener('click', function() {
                const query = document.getElementById('wazSearch').value;
                if (query.trim()) {
                    searchWaz(query);
                }
            });
            
            // Gojol search
            document.querySelector('#gojolSearch + .search-btn').addEventListener('click', function() {
                const query = document.getElementById('gojolSearch').value;
                if (query.trim()) {
                    searchGojol(query);
                }
            });
            
            // Enter key support for search
            const searchInputs = document.querySelectorAll('.search-bar');
            searchInputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        this.nextElementSibling.click();
                    }
                });
            });
            
            // Clear search when input is empty for Quran
            document.getElementById('quranSearch').addEventListener('input', function() {
                if (this.value.trim() === '') {
                    const surahGrid = document.getElementById('surahGrid');
                    const surahItems = surahGrid.querySelectorAll('.surah-item');
                    const searchResult = document.getElementById('quranSearchResult');
                    
                    surahItems.forEach(item => {
                        item.style.display = 'block';
                    });
                    
                    searchResult.classList.remove('show');
                }
            });
            
            // Clear search when input is empty for Waz
            document.getElementById('wazSearch').addEventListener('input', function() {
                if (this.value.trim() === '') {
                    const wazGrid = document.getElementById('wazGrid');
                    const videoItems = wazGrid.querySelectorAll('.video-item');
                    const searchResult = document.getElementById('wazSearchResult');
                    
                    videoItems.forEach(item => {
                        item.style.display = 'block';
                    });
                    
                    searchResult.classList.remove('show');
                }
            });
            
            // Clear search when input is empty for Gojol
            document.getElementById('gojolSearch').addEventListener('input', function() {
                if (this.value.trim() === '') {
                    const gojolGrid = document.getElementById('gojolGrid');
                    const videoItems = gojolGrid.querySelectorAll('.video-item');
                    const searchResult = document.getElementById('gojolSearchResult');
                    
                    videoItems.forEach(item => {
                        item.style.display = 'block';
                    });
                    
                    searchResult.classList.remove('show');
                }
            });
        }

        // Search functions
        function searchQuran(query) {
            const surahGrid = document.getElementById('surahGrid');
            const searchResult = document.getElementById('quranSearchResult');
            const surahItems = surahGrid.querySelectorAll('.surah-item');
            
            let foundItems = 0;
            
            surahItems.forEach(item => {
                const name = item.getAttribute('data-name');
                
                if (name.includes(query.toLowerCase())) {
                    item.style.display = 'block';
                    foundItems++;
                } else {
                    item.style.display = 'none';
                }
            });
            
            if (foundItems === 0) {
                searchResult.textContent = `"${query}" এর জন্য কোনো সূরা পাওয়া যায়নি।`;
                searchResult.classList.add('show');
            } else {
                searchResult.textContent = `"${query}" এর জন্য ${foundItems} টি সূরা পাওয়া গেছে।`;
                searchResult.classList.add('show');
            }
        }

        function searchWaz(query) {
            const wazGrid = document.getElementById('wazGrid');
            const searchResult = document.getElementById('wazSearchResult');
            const videoItems = wazGrid.querySelectorAll('.video-item');
            
            let foundItems = 0;
            
            videoItems.forEach(item => {
                const title = item.getAttribute('data-title');
                const keywords = item.getAttribute('data-keywords');
                
                if (title.includes(query.toLowerCase()) || keywords.includes(query.toLowerCase())) {
                    item.style.display = 'block';
                    foundItems++;
                } else {
                    item.style.display = 'none';
                }
            });
            
            if (foundItems === 0) {
                searchResult.textContent = `"${query}" এর জন্য কোনো ওয়াজ পাওয়া যায়নি।`;
                searchResult.classList.add('show');
                
                // Log the search query to Firebase
                logSearchQuery(query, 'waz');
            } else {
                searchResult.textContent = `"${query}" এর জন্য ${foundItems} টি ওয়াজ পাওয়া গেছে।`;
                searchResult.classList.add('show');
            }
        }

        function searchGojol(query) {
            const gojolGrid = document.getElementById('gojolGrid');
            const searchResult = document.getElementById('gojolSearchResult');
            const videoItems = gojolGrid.querySelectorAll('.video-item');
            
            let foundItems = 0;
            
            videoItems.forEach(item => {
                const title = item.getAttribute('data-title');
                const keywords = item.getAttribute('data-keywords');
                
                if (title.includes(query.toLowerCase()) || keywords.includes(query.toLowerCase())) {
                    item.style.display = 'block';
                    foundItems++;
                } else {
                    item.style.display = 'none';
                }
            });
            
            if (foundItems === 0) {
                searchResult.textContent = `"${query}" এর জন্য কোনো গজল পাওয়া যায়নি।`;
                searchResult.classList.add('show');
                
                // Log the search query to Firebase
                logSearchQuery(query, 'gojol');
            } else {
                searchResult.textContent = `"${query}" এর জন্য ${foundItems} টি গজল পাওয়া গেছে।`;
                searchResult.classList.add('show');
            }
        }

        function logSearchQuery(query, type) {
            const searchLog = {
                query: query,
                type: type,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            };
            
            searchLogCollection.add(searchLog)
                .then(() => {
                    console.log("Search query logged successfully");
                })
                .catch((error) => {
                    console.error("Error logging search query: ", error);
                });
        }
    </script>
</body>
</html>
