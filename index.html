<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zikrayn - ইসলামিক গাইড</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #0a5c0a;
            --secondary: #0d8b0d;
            --accent: #d4af37;
            --dark: #121212;
            --darker: #0a0a0a;
            --light: #f5f5f5;
            --card-bg: #1e1e1e;
        }

        body {
            background: linear-gradient(135deg, var(--darker), var(--dark));
            color: var(--light);
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(10, 92, 10, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(13, 139, 13, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(212, 175, 55, 0.05) 0%, transparent 50%);
            z-index: -1;
        }

        .islamic-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle, var(--primary) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.03;
            z-index: -1;
        }

        /* Notification Bell Styles for User App */
        .notification-container {
            position: relative;
            margin-right: 15px;
        }

        .notification-bell {
            position: relative;
            background: none;
            border: none;
            color: var(--accent);
            font-size: 1.3rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .notification-bell:hover {
            background: rgba(212, 175, 55, 0.1);
        }

        .notification-badge {
            position: absolute;
            top: 3px;
            right: 3px;
            background: #ff4757;
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            font-size: 0.6rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Notification Dropdown for User App */
        .notification-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 320px;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            z-index: 1000;
            display: none;
            max-height: 350px;
            overflow-y: auto;
        }

        .notification-dropdown.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .notification-header {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-title {
            font-size: 1rem;
            color: var(--accent);
            font-weight: bold;
        }

        .clear-notifications {
            background: none;
            border: none;
            color: var(--accent);
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }

        .clear-notifications:hover {
            color: #e6c44d;
        }

        .notification-list {
            list-style: none;
        }

        .notification-item {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            cursor: pointer;
            transition: all 0.3s;
        }

        .notification-item:hover {
            background: rgba(255,255,255,0.05);
        }

        .notification-item.unread {
            background: rgba(10, 92, 10, 0.1);
        }

        .notification-content {
            font-size: 0.85rem;
            margin-bottom: 5px;
            line-height: 1.4;
        }

        .notification-time {
            font-size: 0.75rem;
            color: #aaa;
        }

        .notification-empty {
            padding: 25px 15px;
            text-align: center;
            color: #aaa;
            font-style: italic;
        }

        /* Notification Modal for User App */
        .notification-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 15px;
        }

        .notification-modal.active {
            display: flex;
        }

        .notification-modal-content {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            width: 100%;
            max-width: 450px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .notification-modal-title {
            font-size: 1.3rem;
            color: var(--accent);
            margin-bottom: 15px;
            text-align: center;
        }

        .notification-modal-body {
            color: #ddd;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .notification-modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* Additional styles for enhanced notifications */
        .notification-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            border-left: 4px solid var(--accent);
            z-index: 3000;
            max-width: 300px;
            cursor: pointer;
            animation: slideInRight 0.3s ease;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        /* Enhanced notification modal */
        .notification-modal-content {
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .notification-modal-body {
            white-space: pre-line;
            line-height: 1.6;
        }
        
        /* Question answer styling */
        .question-answer {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }
        
        .question-answer-title {
            font-weight: bold;
            color: var(--accent);
            margin-bottom: 10px;
        }
        
        .question-answer-content {
            line-height: 1.6;
        }
        
        .question-answer-meta {
            font-size: 0.8rem;
            color: #aaa;
            margin-top: 10px;
            text-align: right;
        }

        /* Responsive Styles for User App */
        @media (max-width: 767px) {
            .notification-dropdown {
                width: 280px;
                right: -40px;
            }
            
            .notification-container {
                margin-right: 10px;
            }
        }

        @media (max-width: 480px) {
            .notification-dropdown {
                width: 260px;
                right: -60px;
            }
            
            .notification-bell {
                font-size: 1.2rem;
                padding: 6px;
            }
        }

        /* Compact Location Selector */
        .location-selector {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 12px;
            margin: 10px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .location-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .form-row {
            display: flex;
            gap: 8px;
        }

        .location-select {
            flex: 1;
            padding: 10px 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: var(--light);
            font-size: 0.9rem;
            outline: none;
        }

        .location-select:focus {
            outline: 1px solid var(--accent);
        }

        .location-btn {
            background: var(--accent);
            color: var(--dark);
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .location-btn:hover {
            background: #e6c44d;
            transform: translateY(-2px);
        }

        .current-location {
            margin-top: 8px;
            text-align: center;
            font-size: 0.8rem;
            color: var(--accent);
        }

        /* লোকেশন স্ট্যাটাস স্টাইল */
        .location-status {
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* অটো ডিটেক্ট বাটন স্টাইল */
        #autoDetectLocation {
            background: #2d7bd4 !important;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        #autoDetectLocation:hover {
            background: #1e6bb8 !important;
        }

        #autoDetectLocation:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        /* Search Result Message */
        .search-result-message {
            text-align: center;
            padding: 15px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            color: var(--accent);
            font-style: italic;
            display: none;
        }

        .search-result-message.show {
            display: block;
        }

        /* Recently Viewed Section */
        .recently-viewed {
            margin: 20px 0;
        }

        .recently-viewed-title {
            font-size: 1.2rem;
            color: var(--accent);
            margin-bottom: 15px;
            text-align: center;
        }

        .recently-viewed-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .recent-item {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 120px;
        }

        .recent-item:hover {
            transform: translateY(-2px);
            background: rgba(255,255,255,0.05);
        }

        .recent-thumbnail {
            width: 100%;
            height: 70px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .recent-title {
            font-size: 0.8rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--darker), var(--dark));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .logo-container {
            text-align: center;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .islamic-logo {
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, var(--light), var(--accent));
            border-radius: 50%;
            margin: 0 auto 20px;
            position: relative;
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            border: 3px solid var(--accent);
        }

        .islamic-logo i {
            font-size: 70px;
            color: var(--primary);
        }

        .app-name {
            font-size: 3.5rem;
            font-weight: bold;
            color: var(--accent);
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
            margin-bottom: 10px;
            font-family: 'Times New Roman', serif;
        }

        .powered-by {
            font-size: 1rem;
            color: #aaa;
            letter-spacing: 1px;
        }

        .loading-animation {
            margin-top: 40px;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255,255,255,0.1);
            border-top: 5px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Main App */
        .app-container {
            display: none;
            max-width: 100%;
            margin: 0 auto;
            padding: 0 10px 80px;
        }

        /* Desktop Layout */
        @media (min-width: 768px) {
            .app-container {
                max-width: 1200px;
                padding: 0 20px 80px;
            }
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page.active {
            display: block;
        }

        /* Header */
        .islamic-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 15px;
            background: rgba(30, 30, 30, 0.8);
            border-radius: 20px;
            margin: 15px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* Desktop Header */
        @media (min-width: 768px) {
            .islamic-header {
                padding: 25px 30px;
                margin: 20px 0;
            }
        }

        .app-title h1 {
            font-size: 1.8rem;
            color: var(--accent);
            font-family: 'Times New Roman', serif;
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }

        /* Desktop App Title */
        @media (min-width: 768px) {
            .app-title h1 {
                font-size: 2.2rem;
            }
        }

        .search-container {
            display: flex;
            width: 60%;
        }

        /* Desktop Search */
        @media (min-width: 768px) {
            .search-container {
                width: 50%;
            }
        }

        .search-bar {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 25px 0 0 25px;
            background: rgba(255,255,255,0.1);
            outline: none;
            color: var(--light);
            font-size: 0.9rem;
        }

        /* Desktop Search Bar */
        @media (min-width: 768px) {
            .search-bar {
                padding: 15px 20px;
                font-size: 1rem;
            }
        }

        .search-bar::placeholder {
            color: #aaa;
        }

        .search-btn {
            padding: 12px 15px;
            border: none;
            border-radius: 0 25px 25px 0;
            background: var(--accent);
            color: var(--dark);
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        /* Desktop Search Button */
        @media (min-width: 768px) {
            .search-btn {
                padding: 15px 20px;
                font-size: 1.1rem;
            }
        }

        .search-btn:hover {
            background: #e6c44d;
        }

        /* Slideshow */
        .slideshow-container {
            height: 200px;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 20px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* Desktop Slideshow */
        @media (min-width: 768px) {
            .slideshow-container {
                height: 300px;
                margin-bottom: 30px;
            }
        }

        .slideshow {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        /* Time Display */
        .time-display {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* Desktop Time Display */
        @media (min-width: 768px) {
            .time-display {
                padding: 25px;
                margin-bottom: 25px;
            }
        }

        .date-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .date-item {
            flex: 1;
            padding: 10px;
        }

        .date-label {
            font-size: 0.8rem;
            color: var(--accent);
            margin-bottom: 5px;
        }

        /* Desktop Date Label */
        @media (min-width: 768px) {
            .date-label {
                font-size: 0.9rem;
            }
        }

        .date-value {
            font-size: 1.1rem;
            font-weight: bold;
        }

        /* Desktop Date Value */
        @media (min-width: 768px) {
            .date-value {
                font-size: 1.3rem;
                }
        }

        /* Prayer Times */
        .prayer-times {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* Desktop Prayer Times */
        @media (min-width: 768px) {
            .prayer-times {
                padding: 25px;
                margin-bottom: 25px;
            }
        }

        .section-title {
            margin-bottom: 20px;
            text-align: center;
            color: var(--accent);
            font-size: 1.3rem;
            position: relative;
            padding-bottom: 10px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 2px;
            background: var(--accent);
        }

        /* Desktop Section Title */
        @media (min-width: 768px) {
            .section-title {
                font-size: 1.6rem;
                margin-bottom: 25px;
            }
            
            .section-title::after {
                width: 100px;
            }
        }

        .prayer-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        /* Desktop Prayer Grid */
        @media (min-width: 768px) {
            .prayer-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 20px;
            }
        }

        .prayer-item {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            transition: all 0.3s;
        }

        /* Desktop Prayer Item */
        @media (min-width: 768px) {
            .prayer-item {
                flex-direction: column;
                text-align: center;
                padding: 20px 15px;
            }
        }

        .prayer-item:hover {
            background: rgba(255,255,255,0.08);
            transform: translateY(-2px);
        }

        .prayer-name {
            color: var(--accent);
            font-weight: bold;
        }

        /* Desktop Prayer Name */
        @media (min-width: 768px) {
            .prayer-name {
                margin-bottom: 10px;
                font-size: 1.1rem;
            }
        }

        .prayer-time {
            font-weight: bold;
        }

        /* Hadith Section */
        .hadith-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* Desktop Hadith Section */
        @media (min-width: 768px) {
            .hadith-section {
                padding: 25px;
                margin-bottom: 25px;
            }
        }

        .hadith-text {
            font-style: italic;
            text-align: center;
            line-height: 1.6;
            font-size: 1.1rem;
            padding: 10px;
        }

        /* Desktop Hadith Text */
        @media (min-width: 768px) {
            .hadith-text {
                font-size: 1.2rem;
                line-height: 1.8;
                padding: 15px 20px;
            }
        }

        /* Additional Pages Section */
        .additional-pages {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .page-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .page-btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--light);
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            gap: 10px;
        }

        .page-btn:hover {
            background: rgba(255,255,255,0.08);
            transform: translateY(-2px);
        }

        .page-btn i {
            font-size: 1.5rem;
            color: var(--accent);
        }

        .page-btn span {
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* Footer Navigation */
        .main-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(30, 30, 30, 0.9);
            padding: 15px;
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255,255,255,0.1);
            z-index: 100;
        }

        /* Desktop Footer */
        @media (min-width: 768px) {
            .main-footer {
                padding: 20px;
                left: 50%;
                transform: translateX(-50%);
                width: auto;
                max-width: 500px;
                border-radius: 25px 25px 0 0;
                border-top: none;
                box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
            }
        }

        .nav-icons {
            display: flex;
            justify-content: space-around;
            max-width: 500px;
            margin: 0 auto;
        }

        .nav-btn {
            background: none;
            border: none;
            color: #aaa;
            font-size: 1.1rem;
            padding: 8px 12px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Desktop Nav Button */
        @media (min-width: 768px) {
            .nav-btn {
                padding: 10px 15px;
                font-size: 1.2rem;
                border-radius: 20px;
            }
        }

        .nav-btn span {
            font-size: 0.7rem;
            margin-top: 5px;
        }

        /* Desktop Nav Button Text */
        @media (min-width: 768px) {
            .nav-btn span {
                font-size: 0.8rem;
                margin-top: 8px;
            }
        }

        .nav-btn.active {
            background: var(--accent);
            color: var(--dark);
            box-shadow: 0 3px 10px rgba(212, 175, 55, 0.3);
        }

        /* Video Grid */
        .video-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        /* Desktop Video Grid */
        @media (min-width: 768px) {
            .video-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 25px;
                margin-top: 30px;
            }
        }

        /* Tablet Video Grid */
        @media (min-width: 480px) and (max-width: 767px) {
            .video-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
        }

        .video-item {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .video-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .video-thumbnail {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }

        /* Desktop Video Thumbnail */
        @media (min-width: 768px) {
            .video-thumbnail {
                height: 160px;
            }
        }

        .video-title {
            padding: 15px;
            font-size: 0.9rem;
            text-align: center;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Desktop Video Title */
        @media (min-width: 768px) {
            .video-title {
                padding: 20px;
                font-size: 1rem;
                height: 70px;
            }
        }

        /* Video Popup */
        .video-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .video-popup.active {
            display: flex;
        }

        .popup-content {
            width: 100%;
            max-width: 900px;
            position: relative;
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent);
            border: none;
            color: var(--dark);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
            z-index: 1001;
        }

        .close-btn:hover {
            transform: scale(1.1);
            background: #e6c44d;
        }

        #videoPlayer {
            width: 100%;
            height: 0;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            position: relative;
        }

        #videoPlayer iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Profile Page */
        .profile-container {
            text-align: center;
        }

        /* Desktop Profile Container */
        @media (min-width: 768px) {
            .profile-container {
                max-width: 600px;
                margin: 0 auto;
            }
        }

        .profile-pic {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent);
            margin: 0 auto 20px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        /* Desktop Profile Picture */
        @media (min-width: 768px) {
            .profile-pic {
                width: 180px;
                height: 180px;
                margin-bottom: 30px;
            }
        }

        .profile-pic:hover {
            transform: scale(1.05);
        }

        .profile-form {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* Desktop Profile Form */
        @media (min-width: 768px) {
            .profile-form {
                padding: 30px;
                margin: 25px 0;
            }
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--accent);
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            color: var(--light);
            font-size: 1rem;
        }

        /* Desktop Form Inputs */
        @media (min-width: 768px) {
            .form-group input {
                padding: 15px 20px;
                font-size: 1.1rem;
            }
        }

        .form-group input:focus {
            outline: 1px solid var(--accent);
        }

        .save-btn {
            background: var(--accent);
            color: var(--dark);
            border: none;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        /* Desktop Save Button */
        @media (min-width: 768px) {
            .save-btn {
                padding: 18px;
                font-size: 1.2rem;
            }
        }

        .save-btn:hover {
            background: #e6c44d;
            transform: translateY(-2px);
        }

        .social-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* Desktop Social Section */
        @media (min-width: 768px) {
            .social-section {
                padding: 30px;
                margin: 25px 0;
            }
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* Desktop Social Links */
        @media (min-width: 768px) {
            .social-links {
                gap: 20px;
                margin-top: 25px;
            }
        }

        .social-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--dark);
            text-decoration: none;
            font-size: 1.5rem;
            transition: all 0.3s;
        }

        /* Desktop Social Icons */
        @media (min-width: 768px) {
            .social-icon {
                width: 60px;
                height: 60px;
                font-size: 1.7rem;
            }
        }

        .social-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }

        /* Responsive Grid for Home Page - Desktop */
        @media (min-width: 1024px) {
            #homePage {
                display: grid;
                grid-template-columns: 1fr 1fr;
                grid-template-rows: auto auto auto;
                gap: 25px;
                grid-template-areas: 
                    "header header"
                    "slideshow slideshow"
                    "time prayer"
                    "hadith hadith"
                    "additional additional";
            }
            
            #homePage .islamic-header {
                grid-area: header;
            }
            
            #homePage .slideshow-container {
                grid-area: slideshow;
            }
            
            #homePage .time-display {
                grid-area: time;
                margin-bottom: 0;
            }
            
            #homePage .prayer-times {
                grid-area: prayer;
                margin-bottom: 0;
            }
            
            #homePage .hadith-section {
                grid-area: hadith;
            }
            
            #homePage .additional-pages {
                grid-area: additional;
            }
        }

        /* Quran Page Styles */
        .quran-container {
            text-align: center;
        }

        .surah-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        /* Desktop Surah Grid */
        @media (min-width: 768px) {
            .surah-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 20px;
                margin-top: 30px;
            }
        }

        .surah-item {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .surah-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            background: rgba(255,255,255,0.08);
        }

        .surah-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent);
            color: var(--dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .surah-arabic {
            font-size: 1.8rem;
            color: var(--accent);
            margin-bottom: 8px;
            font-family: 'Traditional Arabic', 'Times New Roman', serif;
        }

        .surah-name {
            font-size: 0.9rem;
            color: var(--light);
            font-weight: bold;
        }

        /* New Pages Styles - Masayel, Dua, Tilawat, Cartoon */
        .masayel-container, .dua-container, .tilawat-container, .cartoon-container {
            max-width: 100%;
            margin: 0 auto;
        }

        .masayel-categories {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            margin-bottom: 20px;
            padding: 10px 0;
        }

        .category-btn {
            background: var(--card-bg);
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--light);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
        }

        .category-btn.active {
            background: var(--accent);
            color: var(--dark);
        }

        .masayel-grid, .dua-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        @media (min-width: 768px) {
            .masayel-grid, .dua-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
        }

        .masayel-item, .dua-item {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .masayel-item:hover, .dua-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .masayel-category {
            display: inline-block;
            background: rgba(10, 92, 10, 0.3);
            color: var(--accent);
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }

        .masayel-title, .dua-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--accent);
        }

        .masayel-description {
            color: #ddd;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .dua-arabic {
            font-size: 1.5rem;
            line-height: 1.8;
            text-align: right;
            margin-bottom: 15px;
            font-family: 'Traditional Arabic', 'Times New Roman', serif;
        }

        .dua-pronunciation {
            font-style: italic;
            color: #ddd;
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .dua-meaning {
            color: #bbb;
            line-height: 1.5;
        }

        .tilawat-grid, .cartoon-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (min-width: 768px) {
            .tilawat-grid, .cartoon-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 25px;
                margin-top: 30px;
            }
        }

        @media (min-width: 480px) and (max-width: 767px) {
            .tilawat-grid, .cartoon-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
        }

        .tilawat-item, .cartoon-item {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .tilawat-item:hover, .cartoon-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .tilawat-thumbnail, .cartoon-thumbnail {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }

        @media (min-width: 768px) {
            .tilawat-thumbnail, .cartoon-thumbnail {
                height: 160px;
            }
        }

        .tilawat-title, .cartoon-title {
            padding: 15px;
            font-size: 0.9rem;
            text-align: center;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @media (min-width: 768px) {
            .tilawat-title, .cartoon-title {
                padding: 20px;
                font-size: 1rem;
                height: 70px;
            }
        }

        /* Masayel Detail Modal */
        .masayel-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .masayel-modal.active {
            display: flex;
        }

        .masayel-modal-content {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            width: 100%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .masayel-modal-category {
            display: inline-block;
            background: rgba(10, 92, 10, 0.3);
            color: var(--accent);
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
            margin-bottom: 15px;
        }

        .masayel-modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: var(--accent);
        }

        .masayel-modal-description {
            color: #ddd;
            line-height: 1.6;
            font-size: 1.1rem;
        }

        .close-masayel-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent);
            border: none;
            color: var(--dark);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
        }

        .close-masayel-modal:hover {
            transform: scale(1.1);
            background: #e6c44d;
        }

        /* Remove pagination styles since we're removing pagination */
        .pagination {
            display: none;
        }

        /* Mobile Responsive */
        @media (max-width: 480px) {
            .app-container {
                padding: 0 5px 80px;
            }
            
            .date-row {
                flex-direction: column;
            }
            
            .date-item {
                margin-bottom: 10px;
            }
            
            .video-grid {
                grid-template-columns: 1fr;
            }
            
            .prayer-grid {
                grid-template-columns: 1fr;
            }
            
            .surah-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .islamic-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .search-container {
                width: 100%;
            }
            
            .nav-btn {
                padding: 6px 12px;
                font-size: 1.2rem;
            }
            
            .nav-btn span {
                font-size: 0.6rem;
            }
            
            .page-buttons {
                grid-template-columns: 1fr;
            }
            
            .recently-viewed-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="background-animation"></div>
    <div class="islamic-pattern"></div>

    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="logo-container">
            <div class="islamic-logo">
                <i class="fas fa-mosque"></i>
            </div>
            <h1 class="app-name">Zikrayn</h1>
            <p class="powered-by">Powered by MVBD Studio</p>
        </div>
        <div class="loading-animation">
            <div class="spinner"></div>
        </div>
    </div>

    <!-- Main App Container -->
    <div class="app-container" id="appContainer">
        <!-- Home Page -->
        <div class="page active" id="homePage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="Search..." class="search-bar" id="homeSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
                
                <!-- Notification Bell for User App -->
                <div class="notification-container">
                    <button class="notification-bell" id="notificationBell">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                    </button>
                    <div class="notification-dropdown" id="notificationDropdown">
                        <div class="notification-header">
                            <div class="notification-title">নোটিফিকেশন</div>
                            <button class="clear-notifications" id="clearNotifications">সব মুছুন</button>
                        </div>
                        <ul class="notification-list" id="notificationList">
                            <!-- Notifications will be populated here -->
                        </ul>
                    </div>
                </div>
            </header>

            <div class="slideshow-container">
                <div class="slideshow">
                    <img src="https://i.postimg.cc/fy01b6Nx/A-crystal-ball-with-Arabic-calligraphy-resting-on-a-beach-at-sunset-reflecting-on-the-water-with-a-b.jpg" class="slide active">
                    <img src="https://i.postimg.cc/HsrNZzms/Grid-Art-20251113-102115295.jpg" class="slide">
                    <img src="https://i.postimg.cc/Kz7MyYKy/images-9.jpg" class="slide">
                    <img src="https://i.postimg.cc/xT1bWn9X/desktop-wallpaper-islamic-islam-jumma-black-allah.jpg" class="slide">
                    <img src="https://i.postimg.cc/hj0f53wK/pngtree-quran-ramadan-islam-book-generative-ai-image-15595994.png" class="slide">
                    <img src="https://i.postimg.cc/rwtzkpbf/pngtree-islamic-illustration-of-a-mosque-with-crescents-and-stars-in-the-picture-image-2105297.png" class="slide">
                    <img src="https://i.postimg.cc/zXyGCBJX/photo-1609599006353-e629aaabfeae.jpg" class="slide">
                    <img src="https://i.postimg.cc/j2mKgHsn/islamic-new-year-quran-book-with-dates-photo.jpg" class="slide">
                    <img src="https://i.postimg.cc/Y9yw06LJ/images-5.jpg" class="slide">
                    <img src="https://i.postimg.cc/zGSZKZRv/golden-mosque-with-arabic-calligraphy-stars-1112179-2763.jpg" class="slide">
                </div>
            </div>

            <div class="time-display">
                <div class="date-row">
                    <div class="date-item">
                        <div class="date-label">বাংলা তারিখ</div>
                        <div class="date-value" id="banglaDate">৩০ কার্তিক, ১৪৩২</div>
                    </div>
                    <div class="date-item">
                        <div class="date-label">English Date</div>
                        <div class="date-value" id="englishDate">Loading...</div>
                    </div>
                </div>
                <div class="date-row">
                    <div class="date-item">
                        <div class="date-label">হিজরি তারিখ</div>
                        <div class="date-value" id="arabicDate">২৩ জুমাদাল উলা, ১৪৪৭</div>
                    </div>
                    <div class="date-item">
                        <div class="date-label">সময়</div>
                        <div class="date-value" id="currentTime">--:--:--</div>
                    </div>
                </div>
            </div>

            <!-- Compact Location Selector -->
            <div class="location-selector" id="locationSelector">
                <h3 class="section-title">আপনার লোকেশন সিলেক্ট করুন</h3>
                <div class="location-form">
                    <div class="form-row">
                        <select class="location-select" id="countrySelect">
                            <option value="">দেশ নির্বাচন করুন</option>
                            <option value="bangladesh">বাংলাদেশ</option>
                            <option value="india">ভারত</option>
                            <option value="pakistan">পাকিস্তান</option>
                            <option value="saudi">সৌদি আরব</option>
                            <option value="uae">সংযুক্ত আরব আমিরাত</option>
                        </select>
                        <select class="location-select" id="districtSelect" disabled>
                            <option value="">জেলা নির্বাচন করুন</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <button class="location-btn" id="saveLocation">লোকেশন সেভ করুন</button>
                        <button class="location-btn" id="autoDetectLocation">
                            <i class="fas fa-location-crosshairs"></i> অটো ডিটেক্ট
                        </button>
                    </div>
                </div>
                
                <!-- লোকেশন স্ট্যাটাস ডিসপ্লে -->
                <div class="location-status" id="locationStatus" style="display: none;">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 10px; padding: 10px; background: rgba(212, 175, 55, 0.1); border-radius: 10px; margin-top: 10px;">
                        <i class="fas fa-check-circle" style="color: var(--accent);"></i>
                        <span style="font-size: 0.9rem; color: var(--accent);">অটো লোকেশন ডিটেক্ট করা হয়েছে</span>
                    </div>
                </div>
                
                <div class="current-location" id="currentLocation">
                    লোকেশন সিলেক্ট করা হয়নি
                </div>
            </div>

            <div class="prayer-times">
                <h3 class="section-title">আজকের নামাজের সময়</h3>
                <div class="prayer-grid">
                    <div class="prayer-item">
                        <span class="prayer-name">ফজর</span>
                        <span class="prayer-time" id="fajrTime">--:--</span>
                    </div>
                    <div class="prayer-item">
                        <span class="prayer-name">জোহর</span>
                        <span class="prayer-time" id="dhuhrTime">--:--</span>
                    </div>
                    <div class="prayer-item">
                        <span class="prayer-name">আসর</span>
                        <span class="prayer-time" id="asrTime">--:--</span>
                    </div>
                    <div class="prayer-item">
                        <span class="prayer-name">মাগরিব</span>
                        <span class="prayer-time" id="maghribTime">--:--</span>
                    </div>
                    <div class="prayer-item">
                        <span class="prayer-name">ইশা</span>
                        <span class="prayer-time" id="ishaTime">--:--</span>
                    </div>
                </div>
            </div>

            <div class="hadith-section">
                <h3 class="section-title">হাদিস শরীফ</h3>
                <p class="hadith-text" id="randomHadith">লোড হচ্ছে...</p>
            </div>

            <!-- Additional Pages Section -->
            <div class="additional-pages">
                <h3 class="section-title">অন্যান্য সেকশন</h3>
                <div class="page-buttons">
                    <button class="page-btn" data-page="masayel">
                        <i class="fas fa-question-circle"></i>
                        <span>মাসায়েল</span>
                    </button>
                    <button class="page-btn" data-page="dua">
                        <i class="fas fa-hands-praying"></i>
                        <span>দোয়া</span>
                    </button>
                    <button class="page-btn" data-page="tilawat">
                        <i class="fas fa-microphone"></i>
                        <span>তিলাওয়াত</span>
                    </button>
                    <button class="page-btn" data-page="cartoon">
                        <i class="fas fa-video"></i>
                        <span>ইসলামিক কার্টুন</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Quran Page -->
        <div class="page" id="quranPage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="সূরা খুঁজুন..." class="search-bar" id="quranSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </header>

            <!-- Search Result Message -->
            <div class="search-result-message" id="quranSearchResult"></div>

            <div class="quran-container">
                <h3 class="section-title">পবিত্র কুরআন</h3>
                <div class="surah-grid" id="surahGrid">
                    <!-- Surah items will be populated dynamically -->
                </div>
            </div>
        </div>

        <!-- Waz Page -->
        <div class="page" id="wazPage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="ওয়াজ খুঁজুন..." class="search-bar" id="wazSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </header>

            <!-- Search Result Message -->
            <div class="search-result-message" id="wazSearchResult"></div>

            <!-- Recently Viewed Section -->
            <div class="recently-viewed" id="wazRecentlyViewed" style="display: none;">
                <h3 class="recently-viewed-title">সাম্প্রতিক দেখা ওয়াজ</h3>
                <div class="recently-viewed-grid" id="wazRecentGrid">
                    <!-- Recently viewed waz will be populated here -->
                </div>
            </div>

            <div class="recent-waz">
                <h3 class="section-title">সকল ওয়াজ</h3>
                <div class="video-grid" id="wazGrid">
                    <!-- Waz items will be populated from Firebase -->
                </div>
            </div>
        </div>

        <!-- Gojol Page -->
        <div class="page" id="gojolPage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="গজল খুঁজুন..." class="search-bar" id="gojolSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </header>

            <!-- Search Result Message -->
            <div class="search-result-message" id="gojolSearchResult"></div>

            <!-- Recently Viewed Section -->
            <div class="recently-viewed" id="gojolRecentlyViewed" style="display: none;">
                <h3 class="recently-viewed-title">সাম্প্রতিক দেখা গজল</h3>
                <div class="recently-viewed-grid" id="gojolRecentGrid">
                    <!-- Recently viewed gojol will be populated here -->
                </div>
            </div>

            <div class="recent-gojol">
                <h3 class="section-title">সকল গজল</h3>
                <div class="video-grid" id="gojolGrid">
                    <!-- Gojol items will be populated from Firebase -->
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div class="page" id="profilePage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
            </header>

            <div class="profile-container">
                <img src="https://via.placeholder.com/150/1a5e1a/ffffff?text=User" class="profile-pic" id="profilePic">
                <!-- Hidden file input for profile picture -->
                <input type="file" id="profilePicInput" accept="image/*" style="display: none;">
                
                <div class="profile-form">
                    <div class="form-group">
                        <label for="userName">নাম</label>
                        <input type="text" id="userName" placeholder="আপনার নাম লিখুন">
                    </div>
                    <div class="form-group">
                        <label for="userAge">বয়স</label>
                        <input type="number" id="userAge" placeholder="আপনার বয়স লিখুন">
                    </div>
                    <div class="form-group">
                        <label for="userMobile">মোবাইল নম্বর</label>
                        <input type="tel" id="userMobile" placeholder="আপনার মোবাইল নম্বর লিখুন">
                    </div>
                    <div class="form-group">
                        <label for="userEmail">ইমেইল</label>
                        <input type="email" id="userEmail" placeholder="আপনার ইমেইল লিখুন">
                    </div>
                    <button class="save-btn" id="saveProfile">সেভ করুন</button>
                </div>

                <div class="social-section">
                    <h3 class="section-title">যোগাযোগ করুন</h3>
                    <div class="social-links" id="socialLinks">
                        <!-- Social icons will be populated from Firebase -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Pages -->
        <!-- Masayel Page -->
        <div class="page" id="masayelPage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="মাসায়েল খুঁজুন..." class="search-bar" id="masayelSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </header>

            <!-- Search Result Message -->
            <div class="search-result-message" id="masayelSearchResult"></div>

            <div class="masayel-container">
                <h3 class="section-title">ইসলামিক মাসায়েল</h3>
                
                <div class="masayel-categories" id="masayelCategories">
                    <button class="category-btn active" data-category="all">সব</button>
                    <button class="category-btn" data-category="নামাজ">নামাজ</button>
                    <button class="category-btn" data-category="রোজা">রোজা</button>
                    <button class="category-btn" data-category="যাকাত">যাকাত</button>
                    <button class="category-btn" data-category="হজ্জ">হজ্জ</button>
                    <button class="category-btn" data-category="পবিত্রতা">পবিত্রতা</button>
                    <button class="category-btn" data-category="বিবাহ">বিবাহ</button>
                    <button class="category-btn" data-category="ব্যবসা">ব্যবসা</button>
                    <button class="category-btn" data-category="অন্যান্য">অন্যান্য</button>
                </div>

                <div class="masayel-grid" id="masayelGrid">
                    <!-- Masayel items will be populated from Firebase -->
                </div>
            </div>
        </div>

        <!-- Dua Page -->
        <div class="page" id="duaPage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="দোয়া খুঁজুন..." class="search-bar" id="duaSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </header>

            <!-- Search Result Message -->
            <div class="search-result-message" id="duaSearchResult"></div>

            <div class="dua-container">
                <h3 class="section-title">দোয়া সমগ্র</h3>
                
                <!-- Dua Categories -->
                <div class="masayel-categories" id="duaCategories">
                    <button class="category-btn active" data-category="all">সব</button>
                    <button class="category-btn" data-category="সকাল-সন্ধ্যা">সকাল-সন্ধ্যা</button>
                    <button class="category-btn" data-category="নামাজ">নামাজ</button>
                    <button class="category-btn" data-category="রোজা">রোজা</button>
                    <button class="category-btn" data-category="খাওয়া-দাওয়া">খাওয়া-দাওয়া</button>
                    <button class="category-btn" data-category="ঘুম">ঘুম</button>
                    <button class="category-btn" data-category="বিপদ-আপদ">বিপদ-আপদ</button>
                    <button class="category-btn" data-category="অন্যান্য">অন্যান্য</button>
                </div>

                <div class="dua-grid" id="duaGrid">
                    <!-- Dua items will be populated from Firebase -->
                </div>
            </div>
        </div>

        <!-- Tilawat Page -->
        <div class="page" id="tilawatPage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="তিলাওয়াত খুঁজুন..." class="search-bar" id="tilawatSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </header>

            <!-- Search Result Message -->
            <div class="search-result-message" id="tilawatSearchResult"></div>

            <!-- Recently Viewed Section -->
            <div class="recently-viewed" id="tilawatRecentlyViewed" style="display: none;">
                <h3 class="recently-viewed-title">সাম্প্রতিক দেখা তিলাওয়াত</h3>
                <div class="recently-viewed-grid" id="tilawatRecentGrid">
                    <!-- Recently viewed tilawat will be populated here -->
                </div>
            </div>

            <div class="tilawat-container">
                <h3 class="section-title">কুরআন তিলাওয়াত</h3>
                <div class="tilawat-grid" id="tilawatGrid">
                    <!-- Tilawat items will be populated from Firebase -->
                </div>
            </div>
        </div>

        <!-- Cartoon Page -->
        <div class="page" id="cartoonPage">
            <header class="islamic-header">
                <div class="app-title">
                    <h1>Zikrayn</h1>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="কার্টুন খুঁজুন..." class="search-bar" id="cartoonSearch">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </header>

            <!-- Search Result Message -->
            <div class="search-result-message" id="cartoonSearchResult"></div>

            <!-- Recently Viewed Section -->
            <div class="recently-viewed" id="cartoonRecentlyViewed" style="display: none;">
                <h3 class="recently-viewed-title">সাম্প্রতিক দেখা কার্টুন</h3>
                <div class="recently-viewed-grid" id="cartoonRecentGrid">
                    <!-- Recently viewed cartoon will be populated here -->
                </div>
            </div>

            <div class="cartoon-container">
                <h3 class="section-title">ইসলামিক কার্টুন</h3>
                <div class="cartoon-grid" id="cartoonGrid">
                    <!-- Cartoon items will be populated from Firebase -->
                </div>
            </div>
        </div>

        <!-- Video Popup -->
        <div class="video-popup" id="videoPopup">
            <div class="popup-content">
                <button class="close-btn" id="closeVideo"><i class="fas fa-times"></i></button>
                <div id="videoPlayer"></div>
            </div>
        </div>

        <!-- Masayel Detail Modal -->
        <div class="masayel-modal" id="masayelModal">
            <div class="masayel-modal-content">
                <button class="close-masayel-modal" id="closeMasayelModal"><i class="fas fa-times"></i></button>
                <div class="masayel-modal-category" id="masayelModalCategory">নামাজ</div>
                <h3 class="masayel-modal-title" id="masayelModalTitle">মাসায়েলের শিরোনাম</h3>
                <div class="masayel-modal-description" id="masayelModalDescription">
                    মাসায়েলের বিস্তারিত বর্ণনা এখানে দেখানো হবে।
                </div>
            </div>
        </div>

        <!-- Masayel Question Modal -->
        <div class="masayel-modal" id="masayelQuestionModal">
            <div class="masayel-modal-content">
                <button class="close-masayel-modal" id="closeMasayelQuestionModal"><i class="fas fa-times"></i></button>
                <h3 class="masayel-modal-title">মাসায়েল জিজ্ঞাসা করুন</h3>
                <div class="form-group" style="margin-top: 20px;">
                    <label for="userQuestion">আপনার প্রশ্ন লিখুন</label>
                    <textarea id="userQuestion" placeholder="আপনার মাসায়েল সম্পর্কিত প্রশ্নটি এখানে বিস্তারিত লিখুন..." style="width: 100%; min-height: 150px; padding: 12px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: none;"></textarea>
                </div>
                <div class="form-actions" style="margin-top: 20px; display: flex; gap: 10px;">
                    <button class="btn btn-primary" id="sendQuestionBtn" style="padding: 12px 20px; background: var(--accent); color: var(--dark); border: none; border-radius: 10px; cursor: pointer; font-weight: bold;">
                        <i class="fas fa-paper-plane"></i> প্রশ্ন পাঠান
                    </button>
                    <button class="btn btn-secondary" id="cancelQuestionBtn" style="padding: 12px 20px; background: rgba(255,255,255,0.1); color: white; border: none; border-radius: 10px; cursor: pointer;">
                        বাতিল করুন
                    </button>
                </div>
            </div>
        </div>

        <!-- Notification Modal for User App -->
        <div class="notification-modal" id="notificationModal">
            <div class="notification-modal-content">
                <h3 class="notification-modal-title" id="notificationModalTitle">নোটিশের শিরোনাম</h3>
                <div class="notification-modal-body" id="notificationModalBody">
                    নোটিশের বিস্তারিত বর্ণনা এখানে দেখানো হবে।
                </div>
                <div class="notification-modal-footer">
                    <button class="btn btn-secondary" id="closeNotificationModal">বন্ধ করুন</button>
                </div>
            </div>
        </div>

        <!-- Updated Footer Navigation -->
        <footer class="main-footer">
            <div class="nav-icons">
                <button class="nav-btn active" data-page="home">
                    <i class="fas fa-home"></i>
                    <span>হোম</span>
                </button>
                <button class="nav-btn" data-page="quran">
                    <i class="fas fa-book-quran"></i>
                    <span>কুরআন</span>
                </button>
                <button class="nav-btn" data-page="waz">
                    <i class="fas fa-book-open"></i>
                    <span>ওয়াজ</span>
                </button>
                <button class="nav-btn" data-page="gojol">
                    <i class="fas fa-music"></i>
                    <span>গজল</span>
                </button>
                <button class="nav-btn" data-page="profile">
                    <i class="fas fa-user"></i>
                    <span>প্রোফাইল</span>
                </button>
            </div>
        </footer>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCjrUpoUEtouapeVMSZL0IwtteW8JObqN8",
            authDomain: "zikrayn-app.firebaseapp.com",
            projectId: "zikrayn-app",
            storageBucket: "zikrayn-app.firebasestorage.app",
            messagingSenderId: "397688673617",
            appId: "1:397688673617:web:a03869eb25585b5aa3ef70",
            measurementId: "G-BS71JD2G05"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Firebase Collections
        const wazCollection = db.collection('waz');
        const gojolCollection = db.collection('gojol');
        const hadithCollection = db.collection('hadiths');
        const masayelCollection = db.collection('masayel');
        const duaCollection = db.collection('dua');
        const tilawatCollection = db.collection('tilawat');
        const cartoonCollection = db.collection('cartoon');
        const socialIconsCollection = db.collection('socialIcons');
        const searchLogCollection = db.collection('searchLogs');
        const prayerTimesCollection = db.collection('prayerTimes');
        const dateSettingsCollection = db.collection('dateSettings');
        const questionsCollection = db.collection('questions');
        const repliesCollection = db.collection('replies');
        const notificationsCollection = db.collection('notifications');
        const userNotificationsCollection = db.collection('userNotifications');

        // Remove pagination limit - load all content
        const ITEMS_PER_PAGE = 1000; // Large number to effectively disable pagination

        // Sample data for initial setup
        const sampleHadiths = [
            "যে ব্যক্তি আল্লাহ ও আখিরাতের দিনের উপর ঈমান রাখে, সে যেন তার প্রতিবেশীকে কষ্ট না দেয়।",
            "তোমাদের মধ্যে সেই ব্যক্তি সর্বোত্তম, যে কুরআন শিক্ষা করে এবং অন্যকে শিক্ষা দেয়।",
            "সদকাহ দারিদ্র্য দূর করে, আয়ু বাড়ায় এবং অসুস্থতা থেকে রক্ষা করে।",
            "যে ব্যক্তি তার ভাইয়ের প্রয়োজনে সাহায্য করে, আল্লাহও তার প্রয়োজনে সাহায্য করেন।",
            "আল্লাহ তায়ালা বলেন, 'হে আদম সন্তান, তুমি আমার ইবাদত কর, আমি তোমার অন্তরকে ধন-সম্পদে পূর্ণ করে দিব।'"
        ];

        // Sample Waz and Gojol data
        const sampleWaz = [
            { title: "রমজানের ফজিলত", videoUrl: "https://www.youtube.com/watch?v=abc123", keywords: ["রমজান", "ফজিলত", "রোজা"] },
            { title: "সালাতের গুরুত্ব", videoUrl: "https://www.youtube.com/watch?v=def456", keywords: ["সালাত", "নামাজ", "গুরুত্ব"] },
            { title: "কুরআন তিলাওয়াত", videoUrl: "https://www.youtube.com/watch?v=ghi789", keywords: ["কুরআন", "তিলাওয়াত", "পাঠ"] },
            { title: "দান সদকার ফজিলত", videoUrl: "https://www.youtube.com/watch?v=jkl012", keywords: ["দান", "সদকা", "ফজিলত"] },
            { title: "সত্যের পথে চলা", videoUrl: "https://www.youtube.com/watch?v=mno345", keywords: ["সত্য", "পথ", "চলা"] },
            { title: "আখিরাতের প্রস্তুতি", videoUrl: "https://www.youtube.com/watch?v=pqr678", keywords: ["আখিরাত", "প্রস্তুতি", "মৃত্যু"] }
        ];

        const sampleGojol = [
            { title: "আল্লাহর রহমত", videoUrl: "https://www.youtube.com/watch?v=stu901", keywords: ["আল্লাহ", "রহমত", "গজল"] },
            { title: "নবীজির মদীনা", videoUrl: "https://www.youtube.com/watch?v=vwx234", keywords: ["নবী", "মদীনা", "গজল"] },
            { title: "ইসলামের জয়গান", videoUrl: "https://www.youtube.com/watch?v=yza567", keywords: ["ইসলাম", "জয়গান", "গজল"] },
            { title: "মোহাম্মদুর রাসুলুল্লাহ", videoUrl: "https://www.youtube.com/watch?v=bcd890", keywords: ["মোহাম্মদ", "রাসুল", "গজল"] },
            { title: "কাবা শরীফের গজল", videoUrl: "https://www.youtube.com/watch?v=efg123", keywords: ["কাবা", "শরীফ", "গজল"] },
            { title: "রমজানের গজল", videoUrl: "https://www.youtube.com/watch?v=hij456", keywords: ["রমজান", "গজল", "ইবাদত"] }
        ];

        // Sample Cartoon data
        const sampleCartoon = [
            { title: "ইসলামিক কার্টুন - পর্ব ১", videoUrl: "https://www.youtube.com/watch?v=xyz123", keywords: ["ইসলামিক", "কার্টুন", "পর্ব ১"] },
            { title: "ইসলামিক কার্টুন - পর্ব ২", videoUrl: "https://www.youtube.com/watch?v=uvw456", keywords: ["ইসলামিক", "কার্টুন", "পর্ব ২"] },
            { title: "ইসলামিক কার্টুন - পর্ব ৩", videoUrl: "https://www.youtube.com/watch?v=rst789", keywords: ["ইসলামিক", "কার্টুন", "পর্ব ৩"] },
            { title: "ইসলামিক কার্টুন - পর্ব ৪", videoUrl: "https://www.youtube.com/watch?v=opq012", keywords: ["ইসলামিক", "কার্টুন", "পর্ব ৪"] },
            { title: "ইসলামিক কার্টুন - পর্ব ৫", videoUrl: "https://www.youtube.com/watch?v=lmn345", keywords: ["ইসলামিক", "কার্টুন", "পর্ব ৫"] },
            { title: "ইসলামিক কার্টুন - পর্ব ৬", videoUrl: "https://www.youtube.com/watch?v=ijk678", keywords: ["ইসলামিক", "কার্টুন", "পর্ব ৬"] }
        ];

        // Quran Data - All 114 Surahs
        const surahData = [
            { number: 1, arabic: "الفاتحة", name: "সূরা আল-ফাতিহা", ayat: 7, page: 1 },
            { number: 2, arabic: "البقرة", name: "সূরা আল-বাকারা", ayat: 286, page: 2 },
            { number: 3, arabic: "آل عمران", name: "সূরা আলে-ইমরান", ayat: 200, page: 50 },
            { number: 4, arabic: "النساء", name: "সূরা আন-নিসা", ayat: 176, page: 77 },
            { number: 5, arabic: "المائدة", name: "সূরা আল-মায়িদাহ", ayat: 120, page: 106 },
            { number: 6, arabic: "الأنعام", name: "সূরা আল-আন'আম", ayat: 165, page: 128 },
            { number: 7, arabic: "الأعراف", name: "সূরা আল-আ'রাফ", ayat: 206, page: 151 },
            { number: 8, arabic: "الأنفال", name: "সূরা আল-আনফাল", ayat: 75, page: 177 },
            { number: 9, arabic: "التوبة", name: "সূরা আত-তাওবাহ", ayat: 129, page: 187 },
            { number: 10, arabic: "يونس", name: "সূরা ইউনুস", ayat: 109, page: 208 },
            // Add more surahs as needed...
        ];

        // Location data with time differences
        const locationData = {
            bangladesh: {
                districts: [
                    "ঢাকা", "চট্টগ্রাম", "রাজশাহী", "খুলনা", "বরিশাল", "সিলেট", 
                    "রংপুর", "ময়মনসিংহ", "নোয়াখালী", "নারায়ণগঞ্জ", "গাজীপুর", "ঢাকা বিভাগীয়"
                ],
                timeDifferences: {
                    "ঢাকা": 0,
                    "চট্টগ্রাম": 6,
                    "রাজশাহী": -7,
                    "খুলনা": -3,
                    "বরিশাল": 0,
                    "সিলেট": 6,
                    "রংপুর": -5,
                    "ময়মনসিংহ": 0,
                    "নোয়াখালী": 3,
                    "নারায়ণগঞ্জ": 0,
                    "গাজীপুর": 0,
                    "ঢাকা বিভাগীয়": 0
                }
            },
            india: {
                districts: ["দিল্লি", "কলকাতা", "মুম্বাই", "চেন্নাই", "হায়দ্রাবাদ"],
                timeDifferences: {
                    "দিল্লি": 0,
                    "কলকাতা": 0,
                    "মুম্বাই": 0,
                    "চেন্নাই": 0,
                    "হায়দ্রাবাদ": 0
                }
            },
            pakistan: {
                districts: ["করাচি", "লাহোর", "ইসলামাবাদ", "পেশাওয়ার"],
                timeDifferences: {
                    "করাচি": 0,
                    "লাহোর": 0,
                    "ইসলামাবাদ": 0,
                    "পেশাওয়ার": 0
                }
            },
            saudi: {
                districts: ["রিয়াদ", "জেদ্দা", "মক্কা", "মদিনা"],
                timeDifferences: {
                    "রিয়াদ": 0,
                    "জেদ্দা": 0,
                    "মক্কা": 0,
                    "মদিনা": 0
                }
            },
            uae: {
                districts: ["দুবাই", "আবুধাবি", "শারজাহ"],
                timeDifferences: {
                    "দুবাই": 0,
                    "আবুধাবি": 0,
                    "শারজাহ": 0
                }
            }
        };

        // Country names mapping
        const countryNames = {
            bangladesh: "বাংলাদেশ",
            india: "ভারত",
            pakistan: "পাকিস্তান",
            saudi: "সৌদি আরব",
            uae: "সংযুক্ত আরব আমিরাত"
        };

        // App initialization
        document.addEventListener('DOMContentLoaded', function() {
            // Show splash screen for 3 seconds
            setTimeout(() => {
                document.getElementById('splashScreen').style.display = 'none';
                document.getElementById('appContainer').style.display = 'block';
                initializeApp();
            }, 3000);
        });

        function initializeApp() {
            // Initialize all existing functionality
            initSlideshow();
            updateDateTime();
            setInterval(updateDateTime, 1000);
            setupLocationSystem();
            updatePrayerTimes();
            checkAutoLocationOnStartup();
            loadRandomHadithFromFirebase();
            loadWazFromFirebase(); // No page parameter needed
            loadGojolFromFirebase(); // No page parameter needed
            loadCartoonFromFirebase(); // No page parameter needed
            loadMasayelFromFirebase(); // No page parameter needed
            loadDuaFromFirebase(); // No page parameter needed
            loadTilawatFromFirebase(); // No page parameter needed
            loadSocialIconsFromFirebase();
            loadSurahs();
            loadRecentlyViewed();
            setupRealTimeWazListener();
            setupRealTimeGojolListener();
            setupRealTimeMasayelListener();
            setupRealTimeDuaListener();
            setupRealTimeTilawatListener();
            setupRealTimeCartoonListener();
            setupRealTimeSocialIconsListener();
            setupRealTimePrayerTimesListener();
            setupRealTimeDateSettingsListener();
            setupNavigation();
            setupProfile();
            setupSearch();
            setupMasayelQuestion();
            
            // Initialize notification system for user app
            initializeUserNotificationSystem();
            
            // Set up real-time listener for admin notices and question replies
            setupGeneralNotificationsListener();
        }

        // Initialize User Notification System
        function initializeUserNotificationSystem() {
            const notificationBell = document.getElementById('notificationBell');
            const notificationDropdown = document.getElementById('notificationDropdown');
            const clearNotificationsBtn = document.getElementById('clearNotifications');
            
            // Toggle notification dropdown
            notificationBell.addEventListener('click', function(e) {
                e.stopPropagation();
                notificationDropdown.classList.toggle('active');
                loadUserNotifications();
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function() {
                notificationDropdown.classList.remove('active');
            });
            
            // Prevent dropdown from closing when clicking inside
            notificationDropdown.addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            // Clear all notifications
            clearNotificationsBtn.addEventListener('click', function() {
                if (confirm('আপনি কি সব নোটিফিকেশন মুছে ফেলতে চান?')) {
                    clearAllUserNotifications();
                }
            });
            
            // Load initial notifications
            loadUserNotifications();
            
            // Set up real-time listener for new notifications
            setupUserNotificationsListener();
        }

        // Load User Notifications
        function loadUserNotifications() {
            // Create a unique user ID or use device identifier
            const userId = getUserId();
            
            userNotificationsCollection.where('userId', '==', userId)
                .orderBy('timestamp', 'desc')
                .limit(20)
                .get()
                .then((querySnapshot) => {
                    const notificationList = document.getElementById('notificationList');
                    const notificationBadge = document.getElementById('notificationBadge');
                    
                    notificationList.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        notificationList.innerHTML = `
                            <li class="notification-empty">
                                <i class="fas fa-bell-slash" style="font-size: 1.8rem; margin-bottom: 10px;"></i>
                                <div>কোনো নোটিফিকেশন নেই</div>
                            </li>
                        `;
                        notificationBadge.style.display = 'none';
                        return;
                    }
                    
                    let unreadCount = 0;
                    
                    querySnapshot.forEach((doc) => {
                        const notification = doc.data();
                        const notificationItem = document.createElement('li');
                        notificationItem.className = `notification-item ${notification.read ? '' : 'unread'}`;
                        notificationItem.setAttribute('data-id', doc.id);
                        
                        const timeAgo = getTimeAgo(notification.timestamp?.toDate());
                        
                        notificationItem.innerHTML = `
                            <div class="notification-content">${notification.message}</div>
                            <div class="notification-time">${timeAgo}</div>
                        `;
                        
                        notificationItem.addEventListener('click', function() {
                            markUserNotificationAsRead(doc.id);
                            showUserNotificationDetails(notification);
                        });
                        
                        notificationList.appendChild(notificationItem);
                        
                        if (!notification.read) {
                            unreadCount++;
                        }
                    });
                    
                    // Update badge count
                    if (unreadCount > 0) {
                        notificationBadge.textContent = unreadCount > 99 ? '99+' : unreadCount;
                        notificationBadge.style.display = 'flex';
                    } else {
                        notificationBadge.style.display = 'none';
                    }
                })
                .catch((error) => {
                    console.error("Error loading user notifications: ", error);
                });
        }

        // Get User ID (using device fingerprint or local storage)
        function getUserId() {
            let userId = localStorage.getItem('zikraynUserId');
            
            if (!userId) {
                // Generate a simple user ID based on timestamp and random number
                userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('zikraynUserId', userId);
            }
            
            return userId;
        }

        // Set up real-time listener for user notifications
        function setupUserNotificationsListener() {
            const userId = getUserId();
            
            userNotificationsCollection.where('userId', '==', userId)
                .orderBy('timestamp', 'desc')
                .limit(20)
                .onSnapshot((querySnapshot) => {
                    loadUserNotifications();
                    
                    // Show notification toast for new notifications
                    querySnapshot.docChanges().forEach((change) => {
                        if (change.type === 'added' && !change.doc.data().read) {
                            showNotificationToast(change.doc.data());
                        }
                    });
                }, (error) => {
                    console.error("Real-time user notifications listener error: ", error);
                });
        }

        // Show notification toast for new notifications
        function showNotificationToast(notification) {
            // Create toast element
            const toast = document.createElement('div');
            toast.className = 'notification-toast';
            
            toast.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 5px; color: var(--accent);">${notification.title || 'নতুন নোটিশ'}</div>
                <div style="font-size: 0.9rem;">${notification.message}</div>
            `;
            
            document.body.appendChild(toast);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.style.animation = 'slideOutRight 0.3s ease';
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toast.parentNode.removeChild(toast);
                        }
                    }, 300);
                }
            }, 5000);
            
            // Click to open notification details
            toast.addEventListener('click', () => {
                showUserNotificationDetails(notification);
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            });
        }

        // Mark user notification as read
        function markUserNotificationAsRead(notificationId) {
            userNotificationsCollection.doc(notificationId).update({
                read: true,
                readAt: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                console.log("User notification marked as read");
            })
            .catch((error) => {
                console.error("Error marking user notification as read: ", error);
            });
        }

        // Show user notification details in modal
        function showUserNotificationDetails(notification) {
            document.getElementById('notificationModalTitle').textContent = notification.title || 'নোটিশ';
            
            // If it's a question answer notification, show the answer
            if (notification.relatedQuestionId) {
                showQuestionAnswer(notification.relatedQuestionId, notification);
            } else {
                // Regular notice
                document.getElementById('notificationModalBody').innerHTML = `
                    <div class="notification-modal-body">${notification.message}</div>
                `;
            }
            
            document.getElementById('notificationModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Close dropdown
            document.getElementById('notificationDropdown').classList.remove('active');
        }

        // Show question answer when notification is clicked
        function showQuestionAnswer(questionId, notification) {
            // Find the reply for this question
            repliesCollection.where('questionId', '==', questionId)
                .orderBy('timestamp', 'desc')
                .limit(1)
                .get()
                .then((querySnapshot) => {
                    let modalBody = '';
                    
                    if (!querySnapshot.empty) {
                        querySnapshot.forEach((doc) => {
                            const reply = doc.data();
                            modalBody = `
                                <div class="notification-modal-body">
                                    <div class="question-answer">
                                        <div class="question-answer-title">আপনার প্রশ্নের উত্তর:</div>
                                        <div class="question-answer-content">${reply.answer}</div>
                                        <div class="question-answer-meta">উত্তরদাতা: ${reply.answeredBy}</div>
                                    </div>
                                </div>
                            `;
                        });
                    } else {
                        modalBody = `
                            <div class="notification-modal-body">
                                <div class="question-answer">
                                    <div class="question-answer-title">আপনার প্রশ্ন:</div>
                                    <div class="question-answer-content">${notification.message}</div>
                                    <div class="question-answer-meta">এই প্রশ্নের উত্তর এখনও দেওয়া হয়নি</div>
                                </div>
                            </div>
                        `;
                    }
                    
                    document.getElementById('notificationModalBody').innerHTML = modalBody;
                })
                .catch((error) => {
                    console.error("Error loading reply: ", error);
                    document.getElementById('notificationModalBody').innerHTML = `
                        <div class="notification-modal-body">
                            <div class="question-answer">
                                <div class="question-answer-title">আপনার প্রশ্ন:</div>
                                <div class="question-answer-content">${notification.message}</div>
                                <div class="question-answer-meta">উত্তর লোড করতে সমস্যা হয়েছে</div>
                            </div>
                        </div>
                    `;
                });
        }

        // Clear all user notifications
        function clearAllUserNotifications() {
            const userId = getUserId();
            
            userNotificationsCollection.where('userId', '==', userId)
                .get()
                .then((querySnapshot) => {
                    const batch = db.batch();
                    
                    querySnapshot.forEach((doc) => {
                        batch.delete(doc.ref);
                    });
                    
                    return batch.commit();
                })
                .then(() => {
                    console.log("All user notifications cleared");
                    loadUserNotifications();
                })
                .catch((error) => {
                    console.error("Error clearing user notifications: ", error);
                });
        }

        // Get time ago string
        function getTimeAgo(date) {
            if (!date) return 'সময় অজানা';
            
            const now = new Date();
            const diffInSeconds = Math.floor((now - date) / 1000);
            
            if (diffInSeconds < 60) {
                return 'একটু আগে';
            } else if (diffInSeconds < 3600) {
                const minutes = Math.floor(diffInSeconds / 60);
                return `${minutes} মিনিট আগে`;
            } else if (diffInSeconds < 86400) {
                const hours = Math.floor(diffInSeconds / 3600);
                return `${hours} ঘন্টা আগে`;
            } else if (diffInSeconds < 2592000) {
                const days = Math.floor(diffInSeconds / 86400);
                return `${days} দিন আগে`;
            } else {
                return date.toLocaleDateString('bn-BD');
            }
        }

        // Close notification modal
        document.getElementById('closeNotificationModal').addEventListener('click', function() {
            document.getElementById('notificationModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        });
        
        // Close notification modal when clicking outside
        document.getElementById('notificationModal').addEventListener('click', function(e) {
            if (e.target.id === 'notificationModal') {
                document.getElementById('notificationModal').classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });

        // Set up real-time listener for general notifications (from admin)
        function setupGeneralNotificationsListener() {
            notificationsCollection.orderBy('timestamp', 'desc')
                .limit(10)
                .onSnapshot((querySnapshot) => {
                    const userId = getUserId();
                    
                    querySnapshot.docChanges().forEach((change) => {
                        if (change.type === 'added') {
                            const notification = change.doc.data();
                            
                            // Check if this notification already exists for user
                            userNotificationsCollection.where('userId', '==', userId)
                                .where('sourceId', '==', change.doc.id)
                                .get()
                                .then((querySnapshot) => {
                                    if (querySnapshot.empty) {
                                        // Add to user notifications
                                        userNotificationsCollection.add({
                                            userId: userId,
                                            sourceId: change.doc.id,
                                            title: notification.title,
                                            message: notification.message,
                                            type: 'notice',
                                            timestamp: notification.timestamp,
                                            read: false
                                        });
                                    }
                                })
                                .catch((error) => {
                                    console.error("Error checking existing notification: ", error);
                                });
                        }
                    });
                }, (error) => {
                    console.error("Real-time general notifications listener error: ", error);
                });
            
            // Also listen for question replies
            repliesCollection.orderBy('timestamp', 'desc')
                .limit(10)
                .onSnapshot((querySnapshot) => {
                    const userId = getUserId();
                    
                    querySnapshot.docChanges().forEach((change) => {
                        if (change.type === 'added') {
                            const reply = change.doc.data();
                            
                            // Check if this is a reply to a question asked by this user
                            questionsCollection.doc(reply.questionId).get()
                                .then((questionDoc) => {
                                    if (questionDoc.exists) {
                                        const question = questionDoc.data();
                                        
                                        // Check if this user asked the question
                                        // For now, we'll assume all questions are from this user
                                        // In a real app, you'd have user authentication
                                        
                                        // Check if this reply notification already exists
                                        userNotificationsCollection.where('userId', '==', userId)
                                            .where('relatedQuestionId', '==', reply.questionId)
                                            .get()
                                            .then((querySnapshot) => {
                                                if (querySnapshot.empty) {
                                                    // Add to user notifications
                                                    userNotificationsCollection.add({
                                                        userId: userId,
                                                        relatedQuestionId: reply.questionId,
                                                        title: 'আপনার প্রশ্নের উত্তর',
                                                        message: question.question,
                                                        type: 'question_reply',
                                                        timestamp: reply.timestamp,
                                                        read: false
                                                    });
                                                }
                                            })
                                            .catch((error) => {
                                                console.error("Error checking existing reply notification: ", error);
                                            });
                                    }
                                })
                                .catch((error) => {
                                    console.error("Error getting question: ", error);
                                });
                        }
                    });
                }, (error) => {
                    console.error("Real-time replies listener error: ", error);
                });
        }

        // Modified Firebase Functions without Pagination
        function loadWazFromFirebase() {
            const wazGrid = document.getElementById('wazGrid');
            wazGrid.innerHTML = '<p style="text-align:center; padding:20px; color: var(--accent);">লোড হচ্ছে...</p>';
            
            wazCollection.orderBy('timestamp', 'desc')
                .limit(ITEMS_PER_PAGE) // Large limit to effectively disable pagination
                .get()
                .then((querySnapshot) => {
                    wazGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        // If no data in Firebase, use sample data
                        sampleWaz.forEach(waz => {
                            createVideoItem(wazGrid, waz, 'waz');
                        });
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const waz = doc.data();
                        createVideoItem(wazGrid, waz, 'waz');
                    });
                })
                .catch((error) => {
                    wazGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #ff6b6b;">লোড করতে সমস্যা হচ্ছে</p>';
                    console.error("Error loading waz: ", error);
                });
        }

        function loadGojolFromFirebase() {
            const gojolGrid = document.getElementById('gojolGrid');
            gojolGrid.innerHTML = '<p style="text-align:center; padding:20px; color: var(--accent);">লোড হচ্ছে...</p>';
            
            gojolCollection.orderBy('timestamp', 'desc')
                .limit(ITEMS_PER_PAGE)
                .get()
                .then((querySnapshot) => {
                    gojolGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        // If no data in Firebase, use sample data
                        sampleGojol.forEach(gojol => {
                            createVideoItem(gojolGrid, gojol, 'gojol');
                        });
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const gojol = doc.data();
                        createVideoItem(gojolGrid, gojol, 'gojol');
                    });
                })
                .catch((error) => {
                    gojolGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #ff6b6b;">লোড করতে সমস্যা হচ্ছে</p>';
                    console.error("Error loading gojol: ", error);
                });
        }

        // Load Cartoon from Firebase without Pagination
        function loadCartoonFromFirebase() {
            const cartoonGrid = document.getElementById('cartoonGrid');
            cartoonGrid.innerHTML = '<p style="text-align:center; padding:20px; color: var(--accent);">লোড হচ্ছে...</p>';
            
            cartoonCollection.orderBy('timestamp', 'desc')
                .limit(ITEMS_PER_PAGE)
                .get()
                .then((querySnapshot) => {
                    cartoonGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        // If no data in Firebase, use sample data
                        sampleCartoon.forEach(cartoon => {
                            createVideoItem(cartoonGrid, cartoon, 'cartoon');
                        });
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const cartoon = doc.data();
                        createVideoItem(cartoonGrid, cartoon, 'cartoon');
                    });
                })
                .catch((error) => {
                    cartoonGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #ff6b6b;">লোড করতে সমস্যা হচ্ছে</p>';
                    console.error("Error loading cartoon: ", error);
                });
        }

        // Load Masayel from Firebase without Pagination
        function loadMasayelFromFirebase() {
            const masayelGrid = document.getElementById('masayelGrid');
            masayelGrid.innerHTML = '<p style="text-align:center; padding:20px; color: var(--accent);">লোড হচ্ছে...</p>';
            
            masayelCollection.orderBy('timestamp', 'desc')
                .limit(ITEMS_PER_PAGE)
                .get()
                .then((querySnapshot) => {
                    masayelGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        masayelGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #aaa;">কোনো মাসায়েল পাওয়া যায়নি</p>';
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const masayel = doc.data();
                        createMasayelItem(masayelGrid, masayel);
                    });
                })
                .catch((error) => {
                    masayelGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #ff6b6b;">লোড করতে সমস্যা হচ্ছে</p>';
                    console.error("Error loading masayel: ", error);
                });
        }

        // Load Dua from Firebase without Pagination
        function loadDuaFromFirebase() {
            const duaGrid = document.getElementById('duaGrid');
            duaGrid.innerHTML = '<p style="text-align:center; padding:20px; color: var(--accent);">লোড হচ্ছে...</p>';
            
            duaCollection.orderBy('timestamp', 'desc')
                .limit(ITEMS_PER_PAGE)
                .get()
                .then((querySnapshot) => {
                    duaGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        duaGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #aaa;">কোনো দোয়া পাওয়া যায়নি</p>';
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const dua = doc.data();
                        createDuaItem(duaGrid, dua);
                    });
                })
                .catch((error) => {
                    duaGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #ff6b6b;">লোড করতে সমস্যা হচ্ছে</p>';
                    console.error("Error loading dua: ", error);
                });
        }

        // Load Tilawat from Firebase without Pagination
        function loadTilawatFromFirebase() {
            const tilawatGrid = document.getElementById('tilawatGrid');
            tilawatGrid.innerHTML = '<p style="text-align:center; padding:20px; color: var(--accent);">লোড হচ্ছে...</p>';
            
            tilawatCollection.orderBy('timestamp', 'desc')
                .limit(ITEMS_PER_PAGE)
                .get()
                .then((querySnapshot) => {
                    tilawatGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        tilawatGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #aaa;">কোনো তিলাওয়াত পাওয়া যায়নি</p>';
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const tilawat = doc.data();
                        createVideoItem(tilawatGrid, tilawat, 'tilawat');
                    });
                })
                .catch((error) => {
                    tilawatGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #ff6b6b;">লোড করতে সমস্যা হচ্ছে</p>';
                    console.error("Error loading tilawat: ", error);
                });
        }

        // All other existing functions remain the same
        function initSlideshow() {
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 4000);
        }

        function updateDateTime() {
            const now = new Date();
            
            // English date
            const englishDate = now.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            document.getElementById('englishDate').textContent = englishDate;
            
            // Current time in 12-hour format
            const currentTime = now.toLocaleTimeString('bn-BD', { 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit',
                hour12: true 
            });
            document.getElementById('currentTime').textContent = currentTime;
        }

        function setupLocationSystem() {
            const countrySelect = document.getElementById('countrySelect');
            const districtSelect = document.getElementById('districtSelect');
            const saveLocationBtn = document.getElementById('saveLocation');
            const autoDetectBtn = document.getElementById('autoDetectLocation');
            const currentLocationDisplay = document.getElementById('currentLocation');
            
            // Load saved location if exists
            const savedLocation = localStorage.getItem('zikraynLocation');
            if (savedLocation) {
                const location = JSON.parse(savedLocation);
                countrySelect.value = location.country;
                updateDistrictOptions(location.country);
                districtSelect.value = location.district;
                updateCurrentLocationDisplay(location.country, location.district);
                updatePrayerTimesForLocation(location.country, location.district);
            }
            
            // Country selection change
            countrySelect.addEventListener('change', function() {
                const country = this.value;
                if (country) {
                    districtSelect.disabled = false;
                    updateDistrictOptions(country);
                } else {
                    districtSelect.disabled = true;
                    districtSelect.innerHTML = '<option value="">জেলা নির্বাচন করুন</option>';
                }
            });
            
            // District selection change - auto update prayer times
            districtSelect.addEventListener('change', function() {
                const country = countrySelect.value;
                const district = this.value;
                
                if (country && district) {
                    updatePrayerTimesForLocation(country, district);
                    updateCurrentLocationDisplay(country, district);
                }
            });
            
            // Save location
            saveLocationBtn.addEventListener('click', function() {
                const country = countrySelect.value;
                const district = districtSelect.value;
                
                if (!country || !district) {
                    alert('দয়া করে দেশ এবং জেলা নির্বাচন করুন।');
                    return;
                }
                
                const location = {
                    country: country,
                    district: district
                };
                
                localStorage.setItem('zikraynLocation', JSON.stringify(location));
                updateCurrentLocationDisplay(country, district);
                updatePrayerTimesForLocation(country, district);
                
                alert('লোকেশন সফলভাবে সেভ করা হয়েছে!');
            });
            
            // Auto detect location
            autoDetectBtn.addEventListener('click', function() {
                autoDetectBtn.disabled = true;
                autoDetectBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ডিটেক্ট হচ্ছে...';
                
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        function(position) {
                            const latitude = position.coords.latitude;
                            const longitude = position.coords.longitude;
                            
                            // Reverse geocoding to get location name
                            getLocationName(latitude, longitude)
                                .then(locationInfo => {
                                    if (locationInfo.country && locationInfo.city) {
                                        // Set the detected location
                                        countrySelect.value = locationInfo.country;
                                        updateDistrictOptions(locationInfo.country);
                                        
                                        // Try to find matching district
                                        setTimeout(() => {
                                            const districtOptions = Array.from(districtSelect.options);
                                            const matchedDistrict = districtOptions.find(option => 
                                                option.text.includes(locationInfo.city) || 
                                                locationInfo.city.includes(option.text)
                                            );
                                            
                                            if (matchedDistrict) {
                                                districtSelect.value = matchedDistrict.value;
                                            } else {
                                                // If no exact match, use the first option
                                                districtSelect.selectedIndex = 1;
                                            }
                                            
                                            // Save the location
                                            const location = {
                                                country: locationInfo.country,
                                                district: districtSelect.value
                                            };
                                            
                                            localStorage.setItem('zikraynLocation', JSON.stringify(location));
                                            updateCurrentLocationDisplay(location.country, location.district);
                                            updatePrayerTimesForLocation(location.country, location.district);
                                            
                                            // Show success message
                                            document.getElementById('locationStatus').style.display = 'block';
                                            
                                            alert('অটো লোকেশন সফলভাবে ডিটেক্ট করা হয়েছে!');
                                        }, 500);
                                    } else {
                                        alert('লোকেশন ডিটেক্ট করা গেলেও সঠিক শহর চিহ্নিত করা যায়নি। দয়া করে ম্যানুয়ালি সিলেক্ট করুন।');
                                    }
                                    
                                    autoDetectBtn.disabled = false;
                                    autoDetectBtn.innerHTML = '<i class="fas fa-location-crosshairs"></i> অটো ডিটেক্ট';
                                })
                                .catch(error => {
                                    console.error('Geocoding error:', error);
                                    alert('লোকেশন ডিটেক্ট করতে সমস্যা হয়েছে। দয়া করে ম্যানুয়ালি সিলেক্ট করুন।');
                                    autoDetectBtn.disabled = false;
                                    autoDetectBtn.innerHTML = '<i class="fas fa-location-crosshairs"></i> অটো ডিটেক্ট';
                                });
                        },
                        function(error) {
                            console.error('Geolocation error:', error);
                            alert('লোকেশন ডিটেক্ট করতে সমস্যা হয়েছে। দয়া করে ম্যানুয়ালি সিলেক্ট করুন।');
                            autoDetectBtn.disabled = false;
                            autoDetectBtn.innerHTML = '<i class="fas fa-location-crosshairs"></i> অটো ডিটেক্ট';
                        }
                    );
                } else {
                    alert('আপনার ব্রাউজার জিওলোকেশন সাপোর্ট করে না। দয়া করে ম্যানুয়ালি সিলেক্ট করুন।');
                    autoDetectBtn.disabled = false;
                    autoDetectBtn.innerHTML = '<i class="fas fa-location-crosshairs"></i> অটো ডিটেক্ট';
                }
            });
        }

        // Get location name from coordinates
        function getLocationName(latitude, longitude) {
            return new Promise((resolve, reject) => {
                // Using OpenStreetMap Nominatim API for reverse geocoding
                fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&accept-language=bn`)
                    .then(response => response.json())
                    .then(data => {
                        if (data && data.address) {
                            const address = data.address;
                            let country = '';
                            let city = '';
                            
                            // Determine country
                            if (address.country) {
                                const countryName = address.country.toLowerCase();
                                if (countryName.includes('bangladesh') || countryName.includes('বাংলাদেশ')) {
                                    country = 'bangladesh';
                                } else if (countryName.includes('india') || countryName.includes('ভারত')) {
                                    country = 'india';
                                } else if (countryName.includes('pakistan') || countryName.includes('পাকিস্তান')) {
                                    country = 'pakistan';
                                } else if (countryName.includes('saudi') || countryName.includes('সৌদি')) {
                                    country = 'saudi';
                                } else if (countryName.includes('uae') || countryName.includes('আমিরাত')) {
                                    country = 'uae';
                                }
                            }
                            
                            // Determine city
                            city = address.city || address.town || address.village || address.county || '';
                            
                            resolve({ country, city });
                        } else {
                            reject(new Error('Location data not found'));
                        }
                    })
                    .catch(error => {
                        reject(error);
                    });
            });
        }

        function checkAutoLocationOnStartup() {
            // Check if we should try auto location on startup
            const savedLocation = localStorage.getItem('zikraynLocation');
            const autoLocationEnabled = localStorage.getItem('zikraynAutoLocation') === 'true';
            
            if (!savedLocation && autoLocationEnabled && navigator.geolocation) {
                // Try to get location on startup if no saved location
                document.getElementById('autoDetectLocation').click();
            }
        }

        function updateDistrictOptions(country) {
            const districtSelect = document.getElementById('districtSelect');
            const districts = locationData[country]?.districts || [];
            
            districtSelect.innerHTML = '<option value="">জেলা নির্বাচন করুন</option>';
            
            districts.forEach(district => {
                const option = document.createElement('option');
                option.value = district;
                option.textContent = district;
                districtSelect.appendChild(option);
            });
        }

        function updateCurrentLocationDisplay(country, district) {
            const currentLocationDisplay = document.getElementById('currentLocation');
            currentLocationDisplay.textContent = `${countryNames[country]}, ${district}`;
        }

        function updatePrayerTimes() {
            const savedLocation = localStorage.getItem('zikraynLocation');
            
            if (savedLocation) {
                const location = JSON.parse(savedLocation);
                updatePrayerTimesForLocation(location.country, location.district);
            } else {
                // Default prayer times for Dhaka, Bangladesh
                updatePrayerTimesForLocation('bangladesh', 'ঢাকা');
            }
        }

        // Firebase থেকে নামাজের সময় আপডেট করার ফাংশন
        function updatePrayerTimesForLocation(country, district) {
            const locationKey = `${country}_${district}`;
            
            // Firebase থেকে নামাজের সময় লোড করুন
            prayerTimesCollection.doc(locationKey).get()
                .then((doc) => {
                    if (doc.exists) {
                        const prayerTimes = doc.data();
                        updatePrayerTimesDisplay(prayerTimes);
                    } else {
                        // Firebase-এ ডেটা না থাকলে API থেকে লোড করুন
                        updatePrayerTimesFromAPI(country, district);
                    }
                })
                .catch((error) => {
                    console.error("Error loading prayer times: ", error);
                    // API থেকে লোড করুন
                    updatePrayerTimesFromAPI(country, district);
                });
        }

        // API থেকে নামাজের সময় আপডেট করার ফাংশন
        async function updatePrayerTimesFromAPI(country, city) {
            try {
                // API কল করার জন্য দেশ ও শহরের নাম ইংরেজিতে রূপান্তর
                const countryMap = {
                    'bangladesh': 'Bangladesh',
                    'india': 'India',
                    'pakistan': 'Pakistan',
                    'saudi': 'Saudi Arabia',
                    'uae': 'United Arab Emirates'
                };
                
                const cityMap = {
                    'ঢাকা': 'Dhaka',
                    'চট্টগ্রাম': 'Chittagong',
                    'রাজশাহী': 'Rajshahi',
                    'খুলনা': 'Khulna',
                    'বরিশাল': 'Barisal',
                    'সিলেট': 'Sylhet',
                    'রংপুর': 'Rangpur',
                    'ময়মনসিংহ': 'Mymensingh',
                    'নোয়াখালী': 'Noakhali',
                    'নারায়ণগঞ্জ': 'Narayanganj',
                    'গাজীপুর': 'Gazipur',
                    'ঢাকা বিভাগীয়': 'Dhaka'
                };
                
                const apiCountry = countryMap[country] || country;
                const apiCity = cityMap[city] || city;
                
                // API থেকে নামাজের সময় ডেটা আনুন
                const response = await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${apiCity}&country=${apiCountry}&method=2`);
                const data = await response.json();
                
                if (data.code === 200) {
                    const timings = data.data.timings;
                    
                    // API থেকে প্রাপ্ত সময়গুলোকে 12-ঘন্টা ফরম্যাটে রূপান্তর করুন
                    const formatTime = (time24) => {
                        const [hours, minutes] = time24.split(':');
                        const hour = parseInt(hours);
                        const ampm = hour >= 12 ? 'PM' : 'AM';
                        const hour12 = hour % 12 || 12;
                        return `${hour12}:${minutes} ${ampm}`;
                    };
                    
                    // ঢাকার জন্য নামাজের সময়
                    const dhakaPrayerTimes = {
                        fajr: formatTime(timings.Fajr),
                        dhuhr: formatTime(timings.Dhuhr),
                        asr: formatTime(timings.Asr),
                        maghrib: formatTime(timings.Maghrib),
                        isha: formatTime(timings.Isha)
                    };
                    
                    // জেলা ভিত্তিক সময় পার্থক্য প্রয়োগ করুন
                    const timeDifference = locationData[country]?.timeDifferences?.[city] || 0;
                    const adjustedPrayerTimes = adjustPrayerTimes(dhakaPrayerTimes, timeDifference);
                    
                    // DOM আপডেট করুন
                    updatePrayerTimesDisplay(adjustedPrayerTimes);
                    
                    // Firebase-এ সেভ করুন
                    const locationKey = `${country}_${city}`;
                    prayerTimesCollection.doc(locationKey).set({
                        ...adjustedPrayerTimes,
                        country: country,
                        district: city,
                        countryName: countryNames[country],
                        timeDifference: timeDifference,
                        lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                    });
                } else {
                    throw new Error('API থেকে ডেটা লোড করতে সমস্যা হয়েছে');
                }
            } catch (error) {
                console.error('Prayer times API error:', error);
                // ডিফল্ট নামাজের সময়
                const defaultPrayerTimes = {
                    fajr: "4:58 AM",
                    dhuhr: "11:44 AM",
                    asr: "3:37 PM",
                    maghrib: "5:14 PM",
                    isha: "6:31 PM"
                };
                updatePrayerTimesDisplay(defaultPrayerTimes);
            }
        }

        // নামাজের সময় পার্থক্য প্রয়োগ করার ফাংশন
        function adjustPrayerTimes(prayerTimes, timeDifference) {
            if (timeDifference === 0) return prayerTimes;
            
            const adjustedTimes = {};
            
            for (const prayer in prayerTimes) {
                const time = prayerTimes[prayer];
                adjustedTimes[prayer] = addMinutesToTime(time, timeDifference);
            }
            
            return adjustedTimes;
        }

        // সময়ে মিনিট যোগ করার ফাংশন
        function addMinutesToTime(timeString, minutes) {
            // সময় স্ট্রিং থেকে ঘন্টা, মিনিট এবং AM/PM আলাদা করুন
            const timeParts = timeString.match(/(\d+):(\d+) (AM|PM)/);
            if (!timeParts) return timeString;
            
            let hours = parseInt(timeParts[1]);
            let mins = parseInt(timeParts[2]);
            const ampm = timeParts[3];
            
            // 12-ঘন্টা ফরম্যাটকে 24-ঘন্টা ফরম্যাটে রূপান্তর করুন
            if (ampm === 'PM' && hours !== 12) {
                hours += 12;
            } else if (ampm === 'AM' && hours === 12) {
                hours = 0;
            }
            
            // মিনিট যোগ করুন
            mins += minutes;
            
            // মিনিট 60 এর বেশি হলে ঘন্টা বাড়ান
            if (mins >= 60) {
                hours += Math.floor(mins / 60);
                mins = mins % 60;
            } else if (mins < 0) {
                hours -= Math.ceil(Math.abs(mins) / 60);
                mins = 60 + (mins % 60);
            }
            
            // ঘন্টা 24 এর বেশি হলে সামঞ্জস্য করুন
            hours = hours % 24;
            if (hours < 0) {
                hours += 24;
            }
            
            // 24-ঘন্টা ফরম্যাটকে 12-ঘন্টা ফরম্যাটে রূপান্তর করুন
            let newAmpm = hours >= 12 ? 'PM' : 'AM';
            let newHours = hours % 12;
            if (newHours === 0) {
                newHours = 12;
            }
            
            // মিনিট দুই অঙ্কে ফরম্যাট করুন
            const newMins = mins.toString().padStart(2, '0');
            
            return `${newHours}:${newMins} ${newAmpm}`;
        }

        // নামাজের সময় ডিসপ্লে আপডেট করুন
        function updatePrayerTimesDisplay(prayerTimes) {
            document.getElementById('fajrTime').textContent = prayerTimes.fajr || "--:--";
            document.getElementById('dhuhrTime').textContent = prayerTimes.dhuhr || "--:--";
            document.getElementById('asrTime').textContent = prayerTimes.asr || "--:--";
            document.getElementById('maghribTime').textContent = prayerTimes.maghrib || "--:--";
            document.getElementById('ishaTime').textContent = prayerTimes.isha || "--:--";
        }

        // Real-time listener for prayer times
        function setupRealTimePrayerTimesListener() {
            const savedLocation = localStorage.getItem('zikraynLocation');
            if (savedLocation) {
                const location = JSON.parse(savedLocation);
                const locationKey = `${location.country}_${location.district}`;
                
                prayerTimesCollection.doc(locationKey).onSnapshot((doc) => {
                    if (doc.exists) {
                        const prayerTimes = doc.data();
                        updatePrayerTimesDisplay(prayerTimes);
                    }
                });
            }
        }

        // Real-time listener for date settings
        function setupRealTimeDateSettingsListener() {
            dateSettingsCollection.doc('current').onSnapshot((doc) => {
                if (doc.exists) {
                    const dateSettings = doc.data();
                    document.getElementById('banglaDate').textContent = dateSettings.banglaDate || "৩০ কার্তিক, ১৪৩২";
                    document.getElementById('arabicDate').textContent = dateSettings.hijriDate || "২৩ জুমাদাল উলা, ১৪৪৭";
                }
            });
        }

        // Quran Functions
        function loadSurahs() {
            const surahGrid = document.getElementById('surahGrid');
            surahGrid.innerHTML = '';
            
            surahData.forEach(surah => {
                const surahItem = document.createElement('div');
                surahItem.className = 'surah-item';
                surahItem.setAttribute('data-surah', surah.number);
                surahItem.setAttribute('data-name', surah.name.toLowerCase());
                
                surahItem.innerHTML = `
                    <div class="surah-number">${surah.number}</div>
                    <div class="surah-arabic">${surah.arabic}</div>
                    <div class="surah-name">${surah.name}</div>
                `;
                
                surahItem.addEventListener('click', () => {
                    alert(`${surah.name} সূরা শীঘ্রই আসছে!`);
                });
                
                surahGrid.appendChild(surahItem);
            });
        }

        // Load Social Icons from Firebase
        function loadSocialIconsFromFirebase() {
            const socialLinks = document.getElementById('socialLinks');
            socialLinks.innerHTML = '';
            
            socialIconsCollection.orderBy('timestamp', 'desc').get()
                .then((querySnapshot) => {
                    if (querySnapshot.empty) {
                        // Default social icons if no data in Firebase
                        const defaultIcons = [
                            { name: 'WhatsApp', iconClass: 'fab fa-whatsapp', url: '#' },
                            { name: 'Messenger', iconClass: 'fab fa-facebook-messenger', url: '#' },
                            { name: 'Instagram', iconClass: 'fab fa-instagram', url: '#' },
                            { name: 'TikTok', iconClass: 'fab fa-tiktok', url: '#' },
                            { name: 'Telegram', iconClass: 'fab fa-telegram', url: '#' },
                            { name: 'Website', iconClass: 'fas fa-globe', url: '#' }
                        ];
                        
                        defaultIcons.forEach(icon => {
                            createSocialIcon(socialLinks, icon);
                        });
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const social = doc.data();
                        createSocialIcon(socialLinks, social);
                    });
                })
                .catch((error) => {
                    console.error("Error loading social icons: ", error);
                });
        }

        function createVideoItem(container, item, type) {
            const videoItem = document.createElement('div');
            videoItem.className = 'video-item';
            videoItem.setAttribute('data-title', item.title.toLowerCase());
            videoItem.setAttribute('data-keywords', item.keywords ? item.keywords.join(',') : '');
            
            // Generate thumbnail URL from YouTube video ID
            const videoId = getYouTubeId(item.videoUrl);
            const thumbnailUrl = item.thumbnail || `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
            
            videoItem.innerHTML = `
                <img src="${thumbnailUrl}" class="video-thumbnail" alt="${item.title}" onerror="this.src='https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'">
                <div class="video-title">${item.title}</div>
            `;
            
            videoItem.addEventListener('click', () => {
                playVideo(item.videoUrl, item.title);
                addToRecentlyViewed(item, type);
            });
            container.appendChild(videoItem);
        }

        // Create Masayel Item
        function createMasayelItem(container, masayel) {
            const masayelItem = document.createElement('div');
            masayelItem.className = 'masayel-item';
            masayelItem.setAttribute('data-category', masayel.category);
            masayelItem.setAttribute('data-title', masayel.title.toLowerCase());
            
            masayelItem.innerHTML = `
                <div class="masayel-category">${masayel.category}</div>
                <div class="masayel-title">${masayel.title}</div>
                <div class="masayel-description">${masayel.description}</div>
            `;
            
            masayelItem.addEventListener('click', () => openMasayelDetail(masayel));
            container.appendChild(masayelItem);
        }

        // Create Dua Item
        function createDuaItem(container, dua) {
            const duaItem = document.createElement('div');
            duaItem.className = 'dua-item';
            duaItem.setAttribute('data-title', dua.title.toLowerCase());
            duaItem.setAttribute('data-category', dua.category || 'all');
            
            duaItem.innerHTML = `
                <div class="dua-title">${dua.title}</div>
                <div class="dua-arabic">${dua.arabic}</div>
                <div class="dua-pronunciation">${dua.pronunciation}</div>
                <div class="dua-meaning">${dua.meaning}</div>
            `;
            
            container.appendChild(duaItem);
        }

        // Create Social Icon
        function createSocialIcon(container, social) {
            const socialIcon = document.createElement('a');
            socialIcon.href = social.url;
            socialIcon.target = '_blank';
            socialIcon.className = 'social-icon';
            socialIcon.innerHTML = `<i class="${social.iconClass}"></i>`;
            
            container.appendChild(socialIcon);
        }

        function getYouTubeId(url) {
            if (!url) return null;
            
            // Extract YouTube video ID from various URL formats
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length === 11) ? match[7] : null;
        }

        function loadRandomHadithFromFirebase() {
            hadithCollection.get()
                .then((querySnapshot) => {
                    if (!querySnapshot.empty) {
                        const hadiths = [];
                        querySnapshot.forEach((doc) => {
                            hadiths.push(doc.data().text);
                        });
                        
                        // Random hadith select koro
                        const randomIndex = Math.floor(Math.random() * hadiths.length);
                        document.getElementById('randomHadith').textContent = hadiths[randomIndex];
                    } else {
                        // If no hadiths in Firebase, use sample hadiths
                        const randomIndex = Math.floor(Math.random() * sampleHadiths.length);
                        document.getElementById('randomHadith').textContent = sampleHadiths[randomIndex];
                    }
                })
                .catch((error) => {
                    // If error, use sample hadiths
                    const randomIndex = Math.floor(Math.random() * sampleHadiths.length);
                    document.getElementById('randomHadith').textContent = sampleHadiths[randomIndex];
                    console.error("Error loading hadith: ", error);
                });
        }

        // Real-time listeners for instant updates
        function setupRealTimeWazListener() {
            wazCollection.orderBy('timestamp', 'desc')
                .limit(ITEMS_PER_PAGE)
                .onSnapshot((querySnapshot) => {
                    const wazGrid = document.getElementById('wazGrid');
                    wazGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        // If no data in Firebase, use sample data
                        sampleWaz.forEach(waz => {
                            createVideoItem(wazGrid, waz, 'waz');
                        });
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const waz = doc.data();
                        createVideoItem(wazGrid, waz, 'waz');
                    });
                }, (error) => {
                    console.error("Real-time waz listener error: ", error);
                });
        }

        function setupRealTimeGojolListener() {
            gojolCollection.orderBy('timestamp', 'desc')
                .limit(ITEMS_PER_PAGE)
                .onSnapshot((querySnapshot) => {
                    const gojolGrid = document.getElementById('gojolGrid');
                    gojolGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        // If no data in Firebase, use sample data
                        sampleGojol.forEach(gojol => {
                            createVideoItem(gojolGrid, gojol, 'gojol');
                        });
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const gojol = doc.data();
                        createVideoItem(gojolGrid, gojol, 'gojol');
                    });
                }, (error) => {
                    console.error("Real-time gojol listener error: ", error);
                });
        }

        // Real-time listeners for new collections
        function setupRealTimeMasayelListener() {
            masayelCollection.orderBy('timestamp', 'desc')
                .limit(ITEMS_PER_PAGE)
                .onSnapshot((querySnapshot) => {
                    const masayelGrid = document.getElementById('masayelGrid');
                    masayelGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        masayelGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #aaa;">কোনো মাসায়েল পাওয়া যায়নি</p>';
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const masayel = doc.data();
                        createMasayelItem(masayelGrid, masayel);
                    });
                }, (error) => {
                    console.error("Real-time masayel listener error: ", error);
                });
        }

        function setupRealTimeDuaListener() {
            duaCollection.orderBy('timestamp', 'desc')
                .limit(ITEMS_PER_PAGE)
                .onSnapshot((querySnapshot) => {
                    const duaGrid = document.getElementById('duaGrid');
                    duaGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        duaGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #aaa;">কোনো দোয়া পাওয়া যায়নি</p>';
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const dua = doc.data();
                        createDuaItem(duaGrid, dua);
                    });
                }, (error) => {
                    console.error("Real-time dua listener error: ", error);
                });
        }

        function setupRealTimeTilawatListener() {
            tilawatCollection.orderBy('timestamp', 'desc')
                .limit(ITEMS_PER_PAGE)
                .onSnapshot((querySnapshot) => {
                    const tilawatGrid = document.getElementById('tilawatGrid');
                    tilawatGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        tilawatGrid.innerHTML = '<p style="text-align:center; padding:20px; color: #aaa;">কোনো তিলাওয়াত পাওয়া যায়নি</p>';
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const tilawat = doc.data();
                        createVideoItem(tilawatGrid, tilawat, 'tilawat');
                    });
                }, (error) => {
                    console.error("Real-time tilawat listener error: ", error);
                });
        }

        function setupRealTimeCartoonListener() {
            cartoonCollection.orderBy('timestamp', 'desc')
                .limit(ITEMS_PER_PAGE)
                .onSnapshot((querySnapshot) => {
                    const cartoonGrid = document.getElementById('cartoonGrid');
                    cartoonGrid.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        // If no data in Firebase, use sample data
                        sampleCartoon.forEach(cartoon => {
                            createVideoItem(cartoonGrid, cartoon, 'cartoon');
                        });
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const cartoon = doc.data();
                        createVideoItem(cartoonGrid, cartoon, 'cartoon');
                    });
                }, (error) => {
                    console.error("Real-time cartoon listener error: ", error);
                });
        }

        function setupRealTimeSocialIconsListener() {
            socialIconsCollection.orderBy('timestamp', 'desc')
                .onSnapshot((querySnapshot) => {
                    const socialLinks = document.getElementById('socialLinks');
                    socialLinks.innerHTML = '';
                    
                    if (querySnapshot.empty) {
                        // Default social icons if no data in Firebase
                        const defaultIcons = [
                            { name: 'WhatsApp', iconClass: 'fab fa-whatsapp', url: '#' },
                            { name: 'Messenger', iconClass: 'fab fa-facebook-messenger', url: '#' },
                            { name: 'Instagram', iconClass: 'fab fa-instagram', url: '#' },
                            { name: 'TikTok', iconClass: 'fab fa-tiktok', url: '#' },
                            { name: 'Telegram', iconClass: 'fab fa-telegram', url: '#' },
                            { name: 'Website', iconClass: 'fas fa-globe', url: '#' }
                        ];
                        
                        defaultIcons.forEach(icon => {
                            createSocialIcon(socialLinks, icon);
                        });
                        return;
                    }
                    
                    querySnapshot.forEach((doc) => {
                        const social = doc.data();
                        createSocialIcon(socialLinks, social);
                    });
                }, (error) => {
                    console.error("Real-time social icons listener error: ", error);
                });
        }

        function playVideo(videoUrl, title) {
            const videoPopup = document.getElementById('videoPopup');
            const videoPlayer = document.getElementById('videoPlayer');
            
            const videoId = getYouTubeId(videoUrl);
            if (!videoId) {
                alert('ভিডিও লোড করতে সমস্যা হচ্ছে। দয়া করে ভিডিও লিঙ্ক চেক করুন।');
                return;
            }
            
            videoPlayer.innerHTML = `
                <iframe 
                    src="https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            `;
            
            videoPopup.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        // Open Masayel Detail Modal
        function openMasayelDetail(masayel) {
            document.getElementById('masayelModalCategory').textContent = masayel.category;
            document.getElementById('masayelModalTitle').textContent = masayel.title;
            document.getElementById('masayelModalDescription').textContent = masayel.description;
            document.getElementById('masayelModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Recently Viewed Videos
        function loadRecentlyViewed() {
            const recentlyViewed = JSON.parse(localStorage.getItem('zikraynRecentlyViewed') || '{}');
            
            // Load recently viewed for each type
            loadRecentlyViewedForType('waz', recentlyViewed);
            loadRecentlyViewedForType('gojol', recentlyViewed);
            loadRecentlyViewedForType('tilawat', recentlyViewed);
            loadRecentlyViewedForType('cartoon', recentlyViewed);
        }

        function loadRecentlyViewedForType(type, recentlyViewed) {
            const recentGrid = document.getElementById(`${type}RecentGrid`);
            const recentlyViewedSection = document.getElementById(`${type}RecentlyViewed`);
            
            if (!recentlyViewed[type] || recentlyViewed[type].length === 0) {
                recentlyViewedSection.style.display = 'none';
                return;
            }
            
            // Show the section
            recentlyViewedSection.style.display = 'block';
            
            // Clear the grid
            recentGrid.innerHTML = '';
            
            // Get the 5 most recent items
            const recentItems = recentlyViewed[type].slice(0, 5);
            
            recentItems.forEach(item => {
                const recentItem = document.createElement('div');
                recentItem.className = 'recent-item';
                
                const videoId = getYouTubeId(item.videoUrl);
                const thumbnailUrl = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
                
                recentItem.innerHTML = `
                    <img src="${thumbnailUrl}" class="recent-thumbnail" alt="${item.title}" onerror="this.src='https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'">
                    <div class="recent-title">${item.title}</div>
                `;
                
                recentItem.addEventListener('click', () => {
                    playVideo(item.videoUrl, item.title);
                });
                
                recentGrid.appendChild(recentItem);
            });
        }

        function addToRecentlyViewed(item, type) {
            const recentlyViewed = JSON.parse(localStorage.getItem('zikraynRecentlyViewed') || '{}');
            
            if (!recentlyViewed[type]) {
                recentlyViewed[type] = [];
            }
            
            // Remove if already exists
            recentlyViewed[type] = recentlyViewed[type].filter(i => i.videoUrl !== item.videoUrl);
            
            // Add to the beginning
            recentlyViewed[type].unshift(item);
            
            // Keep only the 5 most recent
            if (recentlyViewed[type].length > 5) {
                recentlyViewed[type] = recentlyViewed[type].slice(0, 5);
            }
            
            localStorage.setItem('zikraynRecentlyViewed', JSON.stringify(recentlyViewed));
            
            // Update the display
            loadRecentlyViewedForType(type, recentlyViewed);
        }

        function setupNavigation() {
            const navButtons = document.querySelectorAll('.nav-btn');
            const pages = document.querySelectorAll('.page');
            const pageButtons = document.querySelectorAll('.page-btn');
            
            // Main navigation
            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetPage = button.getAttribute('data-page');
                    
                    // Update active button
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Show target page
                    pages.forEach(page => page.classList.remove('active'));
                    document.getElementById(`${targetPage}Page`).classList.add('active');
                    
                    // Scroll to top when changing pages
                    window.scrollTo(0, 0);
                });
            });
            
            // Additional page buttons
            pageButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetPage = button.getAttribute('data-page');
                    
                    // Show target page
                    pages.forEach(page => page.classList.remove('active'));
                    document.getElementById(`${targetPage}Page`).classList.add('active');
                    
                    // Update navigation button
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Scroll to top when changing pages
                    window.scrollTo(0, 0);
                });
            });
            
            // Close video popup
            document.getElementById('closeVideo').addEventListener('click', () => {
                document.getElementById('videoPopup').classList.remove('active');
                document.getElementById('videoPlayer').innerHTML = '';
                document.body.style.overflow = 'auto'; // Restore scrolling
            });
            
            // Close popup when clicking outside
            document.getElementById('videoPopup').addEventListener('click', (e) => {
                if (e.target.id === 'videoPopup') {
                    document.getElementById('videoPopup').classList.remove('active');
                    document.getElementById('videoPlayer').innerHTML = '';
                    document.body.style.overflow = 'auto';
                }
            });
            
            // Close masayel modal
            document.getElementById('closeMasayelModal').addEventListener('click', () => {
                document.getElementById('masayelModal').classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            // Close masayel modal when clicking outside
            document.getElementById('masayelModal').addEventListener('click', (e) => {
                if (e.target.id === 'masayelModal') {
                    document.getElementById('masayelModal').classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
            
            // Masayel category filtering
            const categoryButtons = document.querySelectorAll('.category-btn');
            categoryButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const category = button.getAttribute('data-category');
                    
                    // Update active category button
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Filter masayel items
                    const masayelItems = document.querySelectorAll('.masayel-item');
                    masayelItems.forEach(item => {
                        if (category === 'all' || item.getAttribute('data-category') === category) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            });
            
            // Dua category filtering
            const duaCategoryButtons = document.querySelectorAll('#duaCategories .category-btn');
            duaCategoryButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const category = button.getAttribute('data-category');
                    
                    // Update active category button
                    duaCategoryButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Filter dua items
                    const duaItems = document.querySelectorAll('.dua-item');
                    duaItems.forEach(item => {
                        if (category === 'all' || item.getAttribute('data-category') === category) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            });
        }

        function setupProfile() {
            // Profile picture change - direct gallery access
            document.getElementById('profilePic').addEventListener('click', function() {
                document.getElementById('profilePicInput').click();
            });
            
            // Handle file selection
            document.getElementById('profilePicInput').addEventListener('change', function(e) {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();
                    
                    reader.onload = function(event) {
                        document.getElementById('profilePic').src = event.target.result;
                        saveProfilePicture(event.target.result);
                    }
                    
                    reader.readAsDataURL(e.target.files[0]);
                }
            });
            
            // Load saved profile data if exists
            const savedProfile = localStorage.getItem('zikraynProfile');
            if (savedProfile) {
                const profile = JSON.parse(savedProfile);
                document.getElementById('userName').value = profile.name || '';
                document.getElementById('userAge').value = profile.age || '';
                document.getElementById('userMobile').value = profile.mobile || '';
                document.getElementById('userEmail').value = profile.email || '';
                
                // Load profile picture if saved
                if (profile.profilePic) {
                    document.getElementById('profilePic').src = profile.profilePic;
                }
            }
            
            // Save profile on button click
            document.getElementById('saveProfile').addEventListener('click', function() {
                const profile = {
                    name: document.getElementById('userName').value,
                    age: document.getElementById('userAge').value,
                    mobile: document.getElementById('userMobile').value,
                    email: document.getElementById('userEmail').value,
                    profilePic: document.getElementById('profilePic').src
                };
                
                localStorage.setItem('zikraynProfile', JSON.stringify(profile));
                alert('প্রোফাইল তথ্য সফলভাবে সেভ করা হয়েছে!');
            });
        }

        function saveProfilePicture(imageData) {
            const savedProfile = localStorage.getItem('zikraynProfile');
            let profile = {};
            
            if (savedProfile) {
                profile = JSON.parse(savedProfile);
            }
            
            profile.profilePic = imageData;
            localStorage.setItem('zikraynProfile', JSON.stringify(profile));
        }

        function setupSearch() {
            // Home search
            document.querySelector('#homeSearch + .search-btn').addEventListener('click', function() {
                const query = document.getElementById('homeSearch').value;
                if (query.trim()) {
                    alert(`"${query}" খুঁজছেন...`);
                }
            });
            
            // Quran search
            document.querySelector('#quranSearch + .search-btn').addEventListener('click', function() {
                const query = document.getElementById('quranSearch').value;
                if (query.trim()) {
                    searchQuran(query);
                }
            });
            
            // Waz search
            document.querySelector('#wazSearch + .search-btn').addEventListener('click', function() {
                const query = document.getElementById('wazSearch').value;
                if (query.trim()) {
                    searchWaz(query);
                }
            });
            
            // Gojol search
            document.querySelector('#gojolSearch + .search-btn').addEventListener('click', function() {
                const query = document.getElementById('gojolSearch').value;
                if (query.trim()) {
                    searchGojol(query);
                }
            });
            
            // Masayel search
            document.querySelector('#masayelSearch + .search-btn').addEventListener('click', function() {
                const query = document.getElementById('masayelSearch').value;
                if (query.trim()) {
                    searchMasayel(query);
                }
            });
            
            // Dua search
            document.querySelector('#duaSearch + .search-btn').addEventListener('click', function() {
                const query = document.getElementById('duaSearch').value;
                if (query.trim()) {
                    searchDua(query);
                }
            });
            
            // Tilawat search
            document.querySelector('#tilawatSearch + .search-btn').addEventListener('click', function() {
                const query = document.getElementById('tilawatSearch').value;
                if (query.trim()) {
                    searchTilawat(query);
                }
            });
            
            // Cartoon search
            document.querySelector('#cartoonSearch + .search-btn').addEventListener('click', function() {
                const query = document.getElementById('cartoonSearch').value;
                if (query.trim()) {
                    searchCartoon(query);
                }
            });
            
            // Enter key support for search
            const searchInputs = document.querySelectorAll('.search-bar');
            searchInputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        this.nextElementSibling.click();
                    }
                });
            });
            
            // Clear search when input is empty for Quran
            document.getElementById('quranSearch').addEventListener('input', function() {
                if (this.value.trim() === '') {
                    const surahGrid = document.getElementById('surahGrid');
                    const surahItems = surahGrid.querySelectorAll('.surah-item');
                    const searchResult = document.getElementById('quranSearchResult');
                    
                    surahItems.forEach(item => {
                        item.style.display = 'block';
                    });
                    
                    searchResult.classList.remove('show');
                }
            });
            
            // Clear search when input is empty for Waz
            document.getElementById('wazSearch').addEventListener('input', function() {
                if (this.value.trim() === '') {
                    const wazGrid = document.getElementById('wazGrid');
                    const videoItems = wazGrid.querySelectorAll('.video-item');
                    const searchResult = document.getElementById('wazSearchResult');
                    
                    videoItems.forEach(item => {
                        item.style.display = 'block';
                    });
                    
                    searchResult.classList.remove('show');
                }
            });
            
            // Clear search when input is empty for Gojol
            document.getElementById('gojolSearch').addEventListener('input', function() {
                if (this.value.trim() === '') {
                    const gojolGrid = document.getElementById('gojolGrid');
                    const videoItems = gojolGrid.querySelectorAll('.video-item');
                    const searchResult = document.getElementById('gojolSearchResult');
                    
                    videoItems.forEach(item => {
                        item.style.display = 'block';
                    });
                    
                    searchResult.classList.remove('show');
                }
            });
            
            // Clear search when input is empty for Masayel
            document.getElementById('masayelSearch').addEventListener('input', function() {
                if (this.value.trim() === '') {
                    const masayelGrid = document.getElementById('masayelGrid');
                    const masayelItems = masayelGrid.querySelectorAll('.masayel-item');
                    const searchResult = document.getElementById('masayelSearchResult');
                    
                    masayelItems.forEach(item => {
                        item.style.display = 'block';
                    });
                    
                    searchResult.classList.remove('show');
                }
            });
            
            // Clear search when input is empty for Dua
            document.getElementById('duaSearch').addEventListener('input', function() {
                if (this.value.trim() === '') {
                    const duaGrid = document.getElementById('duaGrid');
                    const duaItems = duaGrid.querySelectorAll('.dua-item');
                    const searchResult = document.getElementById('duaSearchResult');
                    
                    duaItems.forEach(item => {
                        item.style.display = 'block';
                    });
                    
                    searchResult.classList.remove('show');
                }
            });
            
            // Clear search when input is empty for Tilawat
            document.getElementById('tilawatSearch').addEventListener('input', function() {
                if (this.value.trim() === '') {
                    const tilawatGrid = document.getElementById('tilawatGrid');
                    const tilawatItems = tilawatGrid.querySelectorAll('.tilawat-item');
                    const searchResult = document.getElementById('tilawatSearchResult');
                    
                    tilawatItems.forEach(item => {
                        item.style.display = 'block';
                    });
                    
                    searchResult.classList.remove('show');
                }
            });
            
            // Clear search when input is empty for Cartoon
            document.getElementById('cartoonSearch').addEventListener('input', function() {
                if (this.value.trim() === '') {
                    const cartoonGrid = document.getElementById('cartoonGrid');
                    const cartoonItems = cartoonGrid.querySelectorAll('.cartoon-item');
                    const searchResult = document.getElementById('cartoonSearchResult');
                    
                    cartoonItems.forEach(item => {
                        item.style.display = 'block';
                    });
                    
                    searchResult.classList.remove('show');
                }
            });
        }

        // Search functions
        function searchQuran(query) {
            const surahGrid = document.getElementById('surahGrid');
            const searchResult = document.getElementById('quranSearchResult');
            const surahItems = surahGrid.querySelectorAll('.surah-item');
            
            let foundItems = 0;
            
            surahItems.forEach(item => {
                const name = item.getAttribute('data-name');
                
                if (name.includes(query.toLowerCase())) {
                    item.style.display = 'block';
                    foundItems++;
                } else {
                    item.style.display = 'none';
                }
            });
            
            if (foundItems === 0) {
                searchResult.textContent = `"${query}" এর জন্য কোনো সূরা পাওয়া যায়নি।`;
                searchResult.classList.add('show');
            } else {
                searchResult.textContent = `"${query}" এর জন্য ${foundItems} টি সূরা পাওয়া গেছে।`;
                searchResult.classList.add('show');
            }
        }

        function searchWaz(query) {
            const wazGrid = document.getElementById('wazGrid');
            const searchResult = document.getElementById('wazSearchResult');
            const videoItems = wazGrid.querySelectorAll('.video-item');
            
            let foundItems = 0;
            
            videoItems.forEach(item => {
                const title = item.getAttribute('data-title');
                const keywords = item.getAttribute('data-keywords');
                
                if (title.includes(query.toLowerCase()) || keywords.includes(query.toLowerCase())) {
                    item.style.display = 'block';
                    foundItems++;
                } else {
                    item.style.display = 'none';
                }
            });
            
            if (foundItems === 0) {
                searchResult.textContent = `"${query}" এর জন্য কোনো ওয়াজ পাওয়া যায়নি।`;
                searchResult.classList.add('show');
                
                // Log the search query to Firebase
                logSearchQuery(query, 'waz');
            } else {
                searchResult.textContent = `"${query}" এর জন্য ${foundItems} টি ওয়াজ পাওয়া গেছে।`;
                searchResult.classList.add('show');
            }
        }

        function searchGojol(query) {
            const gojolGrid = document.getElementById('gojolGrid');
            const searchResult = document.getElementById('gojolSearchResult');
            const videoItems = gojolGrid.querySelectorAll('.video-item');
            
            let foundItems = 0;
            
            videoItems.forEach(item => {
                const title = item.getAttribute('data-title');
                const keywords = item.getAttribute('data-keywords');
                
                if (title.includes(query.toLowerCase()) || keywords.includes(query.toLowerCase())) {
                    item.style.display = 'block';
                    foundItems++;
                } else {
                    item.style.display = 'none';
                }
            });
            
            if (foundItems === 0) {
                searchResult.textContent = `"${query}" এর জন্য কোনো গজল পাওয়া যায়নি।`;
                searchResult.classList.add('show');
                
                // Log the search query to Firebase
                logSearchQuery(query, 'gojol');
            } else {
                searchResult.textContent = `"${query}" এর জন্য ${foundItems} টি গজল পাওয়া গেছে।`;
                searchResult.classList.add('show');
            }
        }

        // Search functions for new pages
        function searchMasayel(query) {
            const masayelGrid = document.getElementById('masayelGrid');
            const searchResult = document.getElementById('masayelSearchResult');
            const masayelItems = masayelGrid.querySelectorAll('.masayel-item');
            
            let foundItems = 0;
            
            masayelItems.forEach(item => {
                const title = item.getAttribute('data-title');
                
                if (title.includes(query.toLowerCase())) {
                    item.style.display = 'block';
                    foundItems++;
                } else {
                    item.style.display = 'none';
                }
            });
            
            if (foundItems === 0) {
                searchResult.textContent = `"${query}" এর জন্য কোনো মাসায়েল পাওয়া যায়নি।`;
                searchResult.classList.add('show');
                
                // Log the search query to Firebase
                logSearchQuery(query, 'masayel');
            } else {
                searchResult.textContent = `"${query}" এর জন্য ${foundItems} টি মাসায়েল পাওয়া গেছে।`;
                searchResult.classList.add('show');
            }
        }

        function searchDua(query) {
            const duaGrid = document.getElementById('duaGrid');
            const searchResult = document.getElementById('duaSearchResult');
            const duaItems = duaGrid.querySelectorAll('.dua-item');
            
            let foundItems = 0;
            
            duaItems.forEach(item => {
                const title = item.getAttribute('data-title');
                
                if (title.includes(query.toLowerCase())) {
                    item.style.display = 'block';
                    foundItems++;
                } else {
                    item.style.display = 'none';
                }
            });
            
            if (foundItems === 0) {
                searchResult.textContent = `"${query}" এর জন্য কোনো দোয়া পাওয়া যায়নি।`;
                searchResult.classList.add('show');
                
                // Log the search query to Firebase
                logSearchQuery(query, 'dua');
            } else {
                searchResult.textContent = `"${query}" এর জন্য ${foundItems} টি দোয়া পাওয়া গেছে।`;
                searchResult.classList.add('show');
            }
        }

        function searchTilawat(query) {
            const tilawatGrid = document.getElementById('tilawatGrid');
            const searchResult = document.getElementById('tilawatSearchResult');
            const tilawatItems = tilawatGrid.querySelectorAll('.tilawat-item');
            
            let foundItems = 0;
            
            tilawatItems.forEach(item => {
                const title = item.getAttribute('data-title');
                
                if (title.includes(query.toLowerCase())) {
                    item.style.display = 'block';
                    foundItems++;
                } else {
                    item.style.display = 'none';
                }
            });
            
            if (foundItems === 0) {
                searchResult.textContent = `"${query}" এর জন্য কোনো তিলাওয়াত পাওয়া যায়নি।`;
                searchResult.classList.add('show');
                
                // Log the search query to Firebase
                logSearchQuery(query, 'tilawat');
            } else {
                searchResult.textContent = `"${query}" এর জন্য ${foundItems} টি তিলাওয়াত পাওয়া গেছে।`;
                searchResult.classList.add('show');
            }
        }

        function searchCartoon(query) {
            const cartoonGrid = document.getElementById('cartoonGrid');
            const searchResult = document.getElementById('cartoonSearchResult');
            const cartoonItems = cartoonGrid.querySelectorAll('.cartoon-item');
            
            let foundItems = 0;
            
            cartoonItems.forEach(item => {
                const title = item.getAttribute('data-title');
                const keywords = item.getAttribute('data-keywords');
                
                if (title.includes(query.toLowerCase()) || keywords.includes(query.toLowerCase())) {
                    item.style.display = 'block';
                    foundItems++;
                } else {
                    item.style.display = 'none';
                }
            });
            
            if (foundItems === 0) {
                searchResult.textContent = `"${query}" এর জন্য কোনো কার্টুন পাওয়া যায়নি।`;
                searchResult.classList.add('show');
                
                // Log the search query to Firebase
                logSearchQuery(query, 'cartoon');
            } else {
                searchResult.textContent = `"${query}" এর জন্য ${foundItems} টি কার্টুন পাওয়া গেছে।`;
                searchResult.classList.add('show');
            }
        }

        function logSearchQuery(query, type) {
            const searchLog = {
                query: query,
                type: type,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            };
            
            searchLogCollection.add(searchLog)
                .then(() => {
                    console.log("Search query logged successfully");
                })
                .catch((error) => {
                    console.error("Error logging search query: ", error);
                });
        }

        // Setup Masayel Question Functionality
        function setupMasayelQuestion() {
            // Add "মাসায়েল জিজ্ঞাসা করুন" button to masayel page
            const masayelContainer = document.querySelector('.masayel-container');
            const questionButton = document.createElement('button');
            questionButton.id = 'masayelQuestionBtn';
            questionButton.className = 'btn btn-primary';
            questionButton.style.margin = '20px auto';
            questionButton.style.display = 'block';
            questionButton.style.padding = '12px 25px';
            questionButton.innerHTML = '<i class="fas fa-question-circle"></i> মাসায়েল জিজ্ঞাসা করুন';
            
            // Insert the button after the categories
            const categories = document.getElementById('masayelCategories');
            categories.parentNode.insertBefore(questionButton, categories.nextSibling);
            
            // Add event listener to the question button
            questionButton.addEventListener('click', function() {
                document.getElementById('masayelQuestionModal').classList.add('active');
                document.body.style.overflow = 'hidden';
            });
            
            // Close question modal
            document.getElementById('closeMasayelQuestionModal').addEventListener('click', function() {
                document.getElementById('masayelQuestionModal').classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            // Cancel question button
            document.getElementById('cancelQuestionBtn').addEventListener('click', function() {
                document.getElementById('masayelQuestionModal').classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            // Send question button
            document.getElementById('sendQuestionBtn').addEventListener('click', function() {
                const questionText = document.getElementById('userQuestion').value.trim();
                
                if (!questionText) {
                    alert('দয়া করে আপনার প্রশ্নটি লিখুন।');
                    return;
                }
                
                // Get user profile data
                const savedProfile = localStorage.getItem('zikraynProfile');
                let userData = {};
                
                if (savedProfile) {
                    userData = JSON.parse(savedProfile);
                }
                
                // Save question to Firebase
                questionsCollection.add({
                    question: questionText,
                    userName: userData.name || 'অজানা ব্যবহারকারী',
                    userMobile: userData.mobile || '',
                    userEmail: userData.email || '',
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    status: 'pending' // pending, answered
                })
                .then(() => {
                    alert('আপনার প্রশ্নটি সফলভাবে জমা দেওয়া হয়েছে! আমরা শীঘ্রই উত্তর দেব।');
                    document.getElementById('userQuestion').value = '';
                    document.getElementById('masayelQuestionModal').classList.remove('active');
                    document.body.style.overflow = 'auto';
                })
                .catch((error) => {
                    alert('প্রশ্ন জমা দিতে সমস্যা হয়েছে: ' + error.message);
                });
            });
            
            // Close question modal when clicking outside
            document.getElementById('masayelQuestionModal').addEventListener('click', function(e) {
                if (e.target.id === 'masayelQuestionModal') {
                    document.getElementById('masayelQuestionModal').classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
        }
    </script>
</body>
</html>
